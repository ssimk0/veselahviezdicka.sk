{"version":3,"sources":["webpack:///./src/views/page/Edit.vue?be7c","webpack:///./src/components/formFields/MceField.vue?6a19","webpack:///src/components/formFields/MceField.vue","webpack:///./src/components/formFields/MceField.vue?ab8a","webpack:///./src/components/formFields/MceField.vue","webpack:///src/views/page/Edit.vue","webpack:///./src/views/page/Edit.vue?ff1b","webpack:///./src/views/page/Edit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","ref","handleSubmit","on","$event","preventDefault","submit","$t","v","_v","_s","model","value","callback","$$v","title","expression","errors","_e","page","body","disabled","staticRenderFns","label","note","config","initValue","apiKey","update","content","name","props","String","mounted","console","log","data","success","res","file","failure","components","methods","$emit","component","beforeRouteEnter","next","vm","getPage","type","to","params","slug","pages","id","computed","details","$route"],"mappings":"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","file":"js/chunk-2d0d6d5c.64c9371c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row justify-content-center align-items-center\",attrs:{\"id\":\"page-edit\"}},[_c('ValidationObserver',{staticClass:\"col-12 pt-5\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('form',{on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.submit)}}},[_c('ValidationProvider',{attrs:{\"rules\":\"required|min:3\",\"name\":_vm.$t('pageEdit.labels.Title'),\"debounce\":300},scopedSlots:_vm._u([{key:\"default\",fn:function(v){return [_c('b-form-group',[_c('label',[_vm._v(_vm._s(_vm.$t('pageEdit.labels.Title')))]),_c('b-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),(v.errors[0])?_c('div',{staticClass:\"help-block with-errors text-danger\"},[_vm._v(_vm._s(v.errors[0])+\" \")]):_vm._e()],1)]}}],null,true)}),_c('ValidationProvider',{attrs:{\"rules\":\"required|min:6\",\"name\":_vm.$t('pageEdit.labels.Body'),\"debounce\":300},scopedSlots:_vm._u([{key:\"default\",fn:function(v){return [_c('mce-field',{attrs:{\"init-value\":_vm.page.body,\"label\":_vm.$t('pageEdit.labels.Body')},model:{value:(_vm.body),callback:function ($$v) {_vm.body=$$v},expression:\"body\"}}),(v.errors[0])?_c('div',{staticClass:\"help-block with-errors text-danger\"},[_vm._v(_vm._s(v.errors[0])+\" \")]):_vm._e()]}}],null,true)}),_c('div',{staticClass:\"text-right\"},[_c('b-button',{attrs:{\"size\":\"xs\",\"type\":\"submit\",\"variant\":\"primary\",\"disabled\":_vm.disabled}},[_vm._v(\" \"+_vm._s(_vm.$t('pageEdit.buttons.confirm'))+\" \")])],1)],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',[_c('label',[_vm._v(_vm._s(_vm.label))]),_c('div',{staticClass:\"mb-3\"},[(_vm.note)?_c('small',[_vm._v(_vm._s(_vm.note))]):_vm._e()]),_c('vue-mce',{ref:\"editor\",attrs:{\"init\":_vm.config,\"initial-value\":_vm.initValue,\"api-key\":_vm.apiKey},on:{\"input\":_vm.update},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-form-group>\n    <label>{{ label }}</label>\n    <div class=\"mb-3\">\n      <small v-if=\"note\">{{ note }}</small>\n    </div>\n    <vue-mce :init=\"config\" @input=\"update\"\n             :initial-value=\"initValue\"\n             v-model=\"content\"\n             :api-key=\"apiKey\"\n             ref=\"editor\"/>\n  </b-form-group>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'MceField',\n  props: {\n    note: String,\n    initValue: String,\n    value: String,\n    label: String,\n  },\n  mounted() {\n    console.log(this);\n  },\n  data: () => ({\n    apiKey: 'l1vv22obp09u6lv98hvp8fksoyoda2mo65dtmzg1r13bodzi',\n    content: '',\n    config: {\n      // theme: 'modern',\n      plugins:\n        'advlist autolink lists link image charmap print code preview table hr anchor pagebreak',\n      fontsize_formats: '8pt 10pt 12pt 14pt 18pt 24pt 36pt',\n      language: 'sk',\n      image_advtab: true,\n      images_upload_handler(blobInfo, success, failure) {\n        const data = new FormData();\n        data.append('file', blobInfo.blob(), blobInfo.filename());\n        axios.post('/api/v1/uploads/pages/media', data)\n          .then((res) => {\n            success(res.data.file);\n          })\n          .catch((err) => {\n            failure(`HTTP Error: ${err.message}`);\n          });\n      },\n      relative_urls: false,\n      height: 300,\n      statusbar: false,\n      menubar: false,\n      toolbar: 'undo redo | fontselect  fontsizeselect forecolor | bold italic underline strikethrough hr | alignleft  aligncenter alignright alignjustify | bullist numlist blockquote outdent indent table | link image imagetools | removeformat code fullscreen',\n    },\n  }),\n  components: {\n    'vue-mce': () => import('@tinymce/tinymce-vue'),\n  },\n  methods: {\n    update() {\n      this.$emit('input', this.content);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MceField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MceField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MceField.vue?vue&type=template&id=73b0f337&\"\nimport script from \"./MceField.vue?vue&type=script&lang=js&\"\nexport * from \"./MceField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"page-edit\" class=\"row justify-content-center align-items-center\">\n    <ValidationObserver v-slot=\"{ handleSubmit }\" class=\"col-12 pt-5\">\n      <form @submit.prevent=\"handleSubmit(submit)\">\n        <ValidationProvider v-slot=\"v\" rules=\"required|min:3\"\n                            :name=\"$t('pageEdit.labels.Title')\" :debounce=\"300\">\n          <b-form-group>\n            <label>{{ $t('pageEdit.labels.Title') }}</label>\n            <b-input v-model=\"title\" type=\"text\"></b-input>\n            <div class=\"help-block with-errors text-danger\"\n                 v-if=v.errors[0]>{{ v.errors[0] }}\n            </div>\n          </b-form-group>\n        </ValidationProvider>\n        <ValidationProvider v-slot=\"v\" rules=\"required|min:6\"\n                            :name=\"$t('pageEdit.labels.Body')\"\n                            :debounce=\"300\">\n          <mce-field v-model=\"body\" :init-value=\"page.body\" :label=\"$t('pageEdit.labels.Body')\">\n          </mce-field>\n          <div class=\"help-block with-errors text-danger\"\n               v-if=v.errors[0]>{{ v.errors[0] }}\n          </div>\n        </ValidationProvider>\n        <div class=\"text-right\">\n          <b-button size=\"xs\" type=\"submit\" variant=\"primary\" :disabled=\"disabled\">\n            {{ $t('pageEdit.buttons.confirm') }}\n          </b-button>\n        </div>\n      </form>\n    </ValidationObserver>\n  </div>\n</template>\n\n<script>\nimport MceField from '@/components/formFields/MceField.vue';\nimport { mapActions, mapGetters } from 'vuex';\nimport pages from '@/api/pages';\nimport routes from '@/constants/routes';\n\nexport default {\n  name: 'EditPage',\n  components: { MceField },\n  beforeRouteEnter(to, from, next) {\n    next((vm) => {\n      vm.getPage({\n        type: to.params.type,\n        slug: to.params.slug,\n      })\n        .then(() => {\n          next();\n        });\n    });\n  },\n  data() {\n    return {\n      body: '',\n      title: '',\n      disabled: false,\n    };\n  },\n  mounted() {\n    this.body = this.page.body;\n    this.title = this.page.title;\n  },\n  methods: {\n    ...mapActions(['getPage']),\n    submit() {\n      if (!this.disabled) {\n        this.disabled = true;\n        pages.update({\n          id: this.page.id,\n          body: this.body,\n          title: this.title,\n        })\n          .then(() => {\n            this.$toasted.success(this.$t('pageEdit.messages.success'));\n            this.disabled = false;\n            this.$router.push({\n              name: routes.PAGE,\n              params: {\n                type: this.$route.params.type,\n                slug: this.$route.params.slug,\n              },\n            });\n          }, () => {\n            this.$toasted.error(this.$t('messages.error'));\n            this.disabled = false;\n          });\n      }\n    },\n  },\n  computed: {\n    ...mapGetters(['details']),\n    page() {\n      return this.details[this.$route.params.type]\n        ? this.details[this.$route.params.type][this.$route.params.slug]\n        : {};\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=ca2003a6&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ca2003a6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}