{"version":3,"sources":["webpack:///./node_modules/v-viewer/src/component.vue?f8c1","webpack:///node_modules/v-viewer/src/component.vue","webpack:///./node_modules/v-viewer/src/component.vue?4462","webpack:///./node_modules/v-viewer/src/component.vue","webpack:///./node_modules/viewerjs/dist/viewer.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","_t","images","options","staticRenderFns","props","type","Array","rebuild","Boolean","default","trigger","Object","data","computed","methods","onChange","rebuildViewer","updateViewer","destroyViewer","createViewer","$viewer","update","$emit","destroy","watch","$nextTick","handler","deep","mounted","destroyed","component","global","factory","module","exports","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","DEFAULTS","backdrop","button","navbar","title","toolbar","className","container","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","zoom","zoomed","TEMPLATE","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_HIDDEN","EVENT_HIDE","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_SHOW","EVENT_SHOWN","EVENT_TRANSITION_END","EVENT_VIEW","EVENT_VIEWED","EVENT_WHEEL","EVENT_ZOOM","EVENT_ZOOMED","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","call","error","isFunction","callback","isArray","assign","_len","args","_key","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","get","set","addEventListener","removeEventListener","removeListener","undefined","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getImageNameFromURL","decodeURIComponent","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","_ref2","endOnly","pageX","pageY","end","timeStamp","Date","now","getPointersCenter","count","_ref3","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","viewerData","parent","max","offsetWidth","offsetHeight","parentData","fulled","viewer","_this","list","items","innerHTML","index","alt","getImageURL","item","img","firstElementChild","loadImage","renderList","outerWidth","resetList","initImage","done","sizingImage","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","imageInitializing","abort","aspectRatio","min","initialImageData","renderImage","_this3","marginLeft","marginTop","viewing","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","isTrusted","clearTimeout","clickCanvasTimeout","played","stop","exit","full","toggle","reset","prev","play","next","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","tagName","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","isSwitchable","change","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","immediate","build","transitioning","initialOffsetWidth","zoomTo","querySelector","onLoad","onViewed","complete","maxIndex","move","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","newWidth","newHeight","oldRatio","originalEvent","offset","center","degree","rotateTo","_scaleX","scale","_scaleY","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","exitFullscreen","_this5","_this6","_this7","tooltipBox","textContent","round","tooltipping","fading","_this8","isImg","querySelectorAll","indexes","delaying","initializing","onStart","others","parseFloat","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","absoluteOffsetX","p","AnotherViewer","Viewer","nodeType","Error","init","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","size","rotates","position","insertBefore","nextSibling"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACJ,EAAIM,GAAG,UAAU,KAAK,CAAC,OAASN,EAAIO,OAAO,QAAUP,EAAIQ,WAAW,IAC1KC,EAAkB,G,qBCQtB,GACEC,MAAO,CACLH,OAAQ,CACNI,KAAMC,OAERC,QAAS,CACPF,KAAMG,QACNC,SAAS,GAEXC,QAAS,GACTR,QAAS,CACPG,KAAMM,SAIVC,KAfF,WAgBI,MAAO,IAITC,SAAU,GAGVC,QAAS,CACPC,SADJ,WAEUpB,KAAKY,QACPZ,KAAKqB,gBAELrB,KAAKsB,gBAGTD,cARJ,WASMrB,KAAKuB,gBACLvB,KAAKwB,gBAEPF,aAZJ,WAaUtB,KAAKyB,SACPzB,KAAKyB,QAAQC,SACb1B,KAAK2B,MAAM,SAAU3B,KAAKyB,UAE1BzB,KAAKwB,gBAGTD,cApBJ,WAqBMvB,KAAKyB,SAAWzB,KAAKyB,QAAQG,WAE/BJ,aAvBJ,WAwBMxB,KAAKyB,QAAU,IAAI,EAAzB,yBACMzB,KAAK2B,MAAM,SAAU3B,KAAKyB,WAI9BI,MAAO,CACLvB,OADJ,WACA,WACMN,KAAK8B,WAAU,WACb,EAAR,eAGIf,QAAS,CACPgB,QADN,WACA,WACQ/B,KAAK8B,WAAU,WACb,EAAV,eAGME,MAAM,GAERzB,QAAS,CACPwB,QADN,WACA,WACQ/B,KAAK8B,WAAU,WACb,EAAV,oBAGME,MAAM,IAIVC,QA5EF,WA6EIjC,KAAKwB,gBAGPU,UAhFF,WAiFIlC,KAAKuB,kBC1FyQ,I,YCO9QY,EAAY,eACd,EACArC,EACAU,GACA,EACA,KACA,KACA,MAIa,aAAA2B,E;;;;;;;;;;CCRd,SAAUC,EAAQC,GAC8CC,EAAOC,QAAUF,KADlF,CAIErC,GAAM,WAAe,aAErB,SAASwC,EAAQC,GAaf,OATED,EADoB,oBAAXE,QAAoD,kBAApBA,OAAOC,SACtC,SAAUF,GAClB,cAAcA,GAGN,SAAUA,GAClB,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAItHD,EAAQC,GAGjB,SAASK,EAAgBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCAIxB,SAASC,EAAkBC,EAAQ1C,GACjC,IAAK,IAAI2C,EAAI,EAAGA,EAAI3C,EAAM4C,OAAQD,IAAK,CACrC,IAAIE,EAAa7C,EAAM2C,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDzC,OAAO0C,eAAeP,EAAQG,EAAWK,IAAKL,IAIlD,SAASM,EAAaZ,EAAaa,EAAYC,GAG7C,OAFID,GAAYX,EAAkBF,EAAYH,UAAWgB,GACrDC,GAAaZ,EAAkBF,EAAac,GACzCd,EAGT,SAASe,EAAgBtB,EAAKkB,EAAKK,GAYjC,OAXIL,KAAOlB,EACTzB,OAAO0C,eAAejB,EAAKkB,EAAK,CAC9BK,MAAOA,EACPT,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZhB,EAAIkB,GAAOK,EAGNvB,EAGT,SAASwB,EAAQC,EAAQC,GACvB,IAAIC,EAAOpD,OAAOoD,KAAKF,GAEvB,GAAIlD,OAAOqD,sBAAuB,CAChC,IAAIC,EAAUtD,OAAOqD,sBAAsBH,GACvCC,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOxD,OAAOyD,yBAAyBP,EAAQM,GAAKjB,eAEtDa,EAAKM,KAAKC,MAAMP,EAAME,GAGxB,OAAOF,EAGT,SAASQ,EAAezB,GACtB,IAAK,IAAIC,EAAI,EAAGA,EAAIyB,UAAUxB,OAAQD,IAAK,CACzC,IAAI0B,EAAyB,MAAhBD,UAAUzB,GAAayB,UAAUzB,GAAK,GAE/CA,EAAI,EACNa,EAAQjD,OAAO8D,IAAS,GAAMC,SAAQ,SAAUpB,GAC9CI,EAAgBZ,EAAQQ,EAAKmB,EAAOnB,OAE7B3C,OAAOgE,0BAChBhE,OAAOiE,iBAAiB9B,EAAQnC,OAAOgE,0BAA0BF,IAEjEb,EAAQjD,OAAO8D,IAASC,SAAQ,SAAUpB,GACxC3C,OAAO0C,eAAeP,EAAQQ,EAAK3C,OAAOyD,yBAAyBK,EAAQnB,OAKjF,OAAOR,EAGT,IAAI+B,EAAW,CAMbC,UAAU,EAMVC,QAAQ,EAMRC,QAAQ,EAMRC,OAAO,EAMPC,SAAS,EAMTC,UAAW,GAMXC,UAAW,OAMXlB,OAAQ,KAMRmB,YAAY,EAMZC,oBAAqB,CAAC,cAAe,WAAY,QAAS,UAAW,iBAAkB,QAAS,SAAU,UAM1GC,iBAAkB,EAMlBC,QAAQ,EAMRC,SAAU,IAMVC,UAAU,EAMVC,SAAS,EAMTC,MAAM,EAMNC,SAAU,IAMVC,UAAW,IAMXC,SAAS,EAMTC,WAAW,EAMXC,UAAU,EAMVC,UAAU,EAMVC,aAAa,EAMbC,aAAa,EAMbC,cAAc,EAOdC,kBAAkB,EAMlBC,SAAS,EAMTC,YAAY,EAMZC,OAAQ,KAMRC,aAAc,EAMdC,UAAW,GAMXC,aAAc,IAMdC,aAAc,IAMdC,IAAK,MAMLC,MAAO,KACPC,KAAM,KACNC,MAAO,KACPC,KAAM,KACNC,OAAQ,KACRC,KAAM,KACNC,OAAQ,KACRC,KAAM,KACNC,OAAQ,MAGNC,EAAW,wYAEXC,EAA+B,qBAAXC,QAAqD,qBAApBA,OAAOC,SAC5DC,EAASH,EAAaC,OAAS,GAC/BG,KAAkBJ,IAAcG,EAAOD,SAASG,kBAAkB,iBAAkBF,EAAOD,SAASG,gBACpGC,IAAoBN,GAAa,iBAAkBG,EACnDI,EAAY,SAEZC,EAAc,OACdC,EAAgB,SAChBC,EAAc,OAEdC,EAAe,GAAGC,OAAOL,EAAW,WACpCM,EAAc,GAAGD,OAAOL,EAAW,UACnCO,EAAa,GAAGF,OAAOL,EAAW,SAClCQ,EAAc,GAAGH,OAAOL,EAAW,UACnCS,EAAmB,GAAGJ,OAAOL,EAAW,eACxCU,EAAwB,GAAGL,OAAOL,EAAW,oBAC7CW,EAAa,GAAGN,OAAOL,EAAW,SAClCY,EAAqB,GAAGP,OAAOL,EAAW,iBAC1Ca,EAAqB,GAAGR,OAAOL,EAAW,iBAC1Cc,EAAqB,GAAGT,OAAOL,EAAW,iBAC1Ce,EAAW,GAAGV,OAAOL,EAAW,OAChCgB,EAAkB,GAAGX,OAAOL,EAAW,cACvCiB,EAAgB,GAAGZ,OAAOL,EAAW,YACrCkB,EAAa,GAAGb,OAAOL,EAAW,SAClCmB,EAAa,GAAGd,OAAOL,EAAW,SAClCoB,EAAa,GAAGf,OAAOL,EAAW,SAClCqB,EAAmB,GAAGhB,OAAOL,EAAW,eAExCsB,EAAc,QACdC,EAAiB,WACjBC,EAAmB,YACnBC,EAAe,SACfC,EAAa,OACbC,EAAiB,UACjBC,EAAa,OACbC,EAAoBhC,EAAkB,aAAe,YACrDiC,EAAmBjC,EAAkB,YAAc,YACnDkC,EAAkBlC,EAAkB,uBAAyB,UAC7DmC,EAAqBjC,EAAoB,cAAgB8B,EACzDI,EAAqBlC,EAAoB,cAAgB+B,EACzDI,EAAmBnC,EAAoB,0BAA4BgC,EACnEI,EAAc,QACdC,EAAe,SACfC,EAAa,OACbC,EAAc,QACdC,EAAuB,gBACvBC,EAAa,OACbC,EAAe,SACfC,GAAc,QACdC,GAAa,OACbC,GAAe,SAEfC,GAAc,GAAGxC,OAAOL,EAAW,UAEnC8C,GAAgB,QAEhBC,GAAU,CAAC,UAAW,WAAY,aAAc,QAAS,OAAQ,OAAQ,OAAQ,cAAe,eAAgB,kBAAmB,iBAQvI,SAASC,GAASrH,GAChB,MAAwB,kBAAVA,EAMhB,IAAIsH,GAAQC,OAAOD,OAASrD,EAAOqD,MAOnC,SAASE,GAASxH,GAChB,MAAwB,kBAAVA,IAAuBsH,GAAMtH,GAQ7C,SAASyH,GAAYzH,GACnB,MAAwB,qBAAVA,EAQhB,SAAS0H,GAAS1H,GAChB,MAA0B,WAAnBxB,EAAQwB,IAAiC,OAAVA,EAExC,IAAI2H,GAAiB3K,OAAO6B,UAAU8I,eAOtC,SAASC,GAAc5H,GACrB,IAAK0H,GAAS1H,GACZ,OAAO,EAGT,IACE,IAAI6H,EAAe7H,EAAMpB,YACrBC,EAAYgJ,EAAahJ,UAC7B,OAAOgJ,GAAgBhJ,GAAa8I,GAAeG,KAAKjJ,EAAW,iBACnE,MAAOkJ,GACP,OAAO,GASX,SAASC,GAAWhI,GAClB,MAAwB,oBAAVA,EAShB,SAASe,GAAQ9D,EAAMgL,GACrB,GAAIhL,GAAQ+K,GAAWC,GACrB,GAAItL,MAAMuL,QAAQjL,IAASuK,GAASvK,EAAKoC,QAEvC,CACE,IACID,EADAC,EAASpC,EAAKoC,OAGlB,IAAKD,EAAI,EAAGA,EAAIC,EAAQD,GAAK,EAC3B,IAA8C,IAA1C6I,EAASH,KAAK7K,EAAMA,EAAKmC,GAAIA,EAAGnC,GAClC,WAGKyK,GAASzK,IACpBD,OAAOoD,KAAKnD,GAAM8D,SAAQ,SAAUpB,GAClCsI,EAASH,KAAK7K,EAAMA,EAAK0C,GAAMA,EAAK1C,MAK1C,OAAOA,EAST,IAAIkL,GAASnL,OAAOmL,QAAU,SAAgB1J,GAC5C,IAAK,IAAI2J,EAAOvH,UAAUxB,OAAQgJ,EAAO,IAAI1L,MAAMyL,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EAAGA,EAAOF,EAAME,IAClGD,EAAKC,EAAO,GAAKzH,UAAUyH,GAa7B,OAVIZ,GAASjJ,IAAQ4J,EAAKhJ,OAAS,GACjCgJ,EAAKtH,SAAQ,SAAUwH,GACjBb,GAASa,IACXvL,OAAOoD,KAAKmI,GAAKxH,SAAQ,SAAUpB,GACjClB,EAAIkB,GAAO4I,EAAI5I,SAMhBlB,GAEL+J,GAAgB,mDAOpB,SAASC,GAASC,EAASC,GACzB,IAAIC,EAAQF,EAAQE,MACpB7H,GAAQ4H,GAAQ,SAAU3I,EAAO6I,GAC3BL,GAAcM,KAAKD,IAAarB,GAASxH,KAC3CA,GAAS,MAGX4I,EAAMC,GAAY7I,KAStB,SAAS+I,GAAmB/I,GAC1B,OAAOqH,GAASrH,GAASA,EAAMgJ,QAAQ,gCAAiC,SAASA,QAAQ,KAAM,UAAUA,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAUhJ,EAShL,SAASiJ,GAASP,EAAS1I,GACzB,SAAK0I,IAAY1I,KAIV0I,EAAQQ,UAAYR,EAAQQ,UAAUC,SAASnJ,GAAS0I,EAAQlH,UAAU4H,QAAQpJ,IAAU,GAQrG,SAASqJ,GAASX,EAAS1I,GACzB,GAAK0I,GAAY1I,EAIjB,GAAIwH,GAASkB,EAAQrJ,QACnB0B,GAAQ2H,GAAS,SAAUY,GACzBD,GAASC,EAAMtJ,WAKnB,GAAI0I,EAAQQ,UACVR,EAAQQ,UAAUK,IAAIvJ,OADxB,CAKA,IAAIwB,EAAYkH,EAAQlH,UAAUgI,OAE7BhI,EAEMA,EAAU4H,QAAQpJ,GAAS,IACpC0I,EAAQlH,UAAY,GAAGkD,OAAOlD,EAAW,KAAKkD,OAAO1E,IAFrD0I,EAAQlH,UAAYxB,GAWxB,SAASyJ,GAAYf,EAAS1I,GACvB0I,GAAY1I,IAIbwH,GAASkB,EAAQrJ,QACnB0B,GAAQ2H,GAAS,SAAUY,GACzBG,GAAYH,EAAMtJ,MAKlB0I,EAAQQ,UACVR,EAAQQ,UAAUQ,OAAO1J,GAIvB0I,EAAQlH,UAAU4H,QAAQpJ,IAAU,IACtC0I,EAAQlH,UAAYkH,EAAQlH,UAAUwH,QAAQhJ,EAAO,MAUzD,SAAS2J,GAAYjB,EAAS1I,EAAO4J,GAC9B5J,IAIDwH,GAASkB,EAAQrJ,QACnB0B,GAAQ2H,GAAS,SAAUY,GACzBK,GAAYL,EAAMtJ,EAAO4J,MAMzBA,EACFP,GAASX,EAAS1I,GAElByJ,GAAYf,EAAS1I,IAGzB,IAAI6J,GAAmB,oBAOvB,SAASC,GAAU9J,GACjB,OAAOA,EAAMgJ,QAAQa,GAAkB,SAASE,cASlD,SAASC,GAAQtB,EAASuB,GACxB,OAAIvC,GAASgB,EAAQuB,IACZvB,EAAQuB,GAGbvB,EAAQwB,QACHxB,EAAQwB,QAAQD,GAGlBvB,EAAQyB,aAAa,QAAQzF,OAAOoF,GAAUG,KASvD,SAASG,GAAQ1B,EAASuB,EAAMhN,GAC1ByK,GAASzK,GACXyL,EAAQuB,GAAQhN,EACPyL,EAAQwB,QACjBxB,EAAQwB,QAAQD,GAAQhN,EAExByL,EAAQ2B,aAAa,QAAQ3F,OAAOoF,GAAUG,IAAQhN,GAI1D,IAAIqN,GAAgB,WAClB,IAAIC,GAAY,EAEhB,GAAIzG,EAAY,CACd,IAAI0G,GAAO,EAEPC,EAAW,aAEXlO,EAAUS,OAAO0C,eAAe,GAAI,OAAQ,CAC9CgL,IAAK,WAEH,OADAH,GAAY,EACLC,GAQTG,IAAK,SAAa3K,GAChBwK,EAAOxK,KAGXiE,EAAO2G,iBAAiB,OAAQH,EAAUlO,GAC1C0H,EAAO4G,oBAAoB,OAAQJ,EAAUlO,GAG/C,OAAOgO,EA3BW,GAsCpB,SAASO,GAAepC,EAAShM,EAAM+N,GACrC,IAAIlO,EAAUsE,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK,GAC9E9C,EAAU0M,EACd/N,EAAK8M,OAAOwB,MAAM7D,IAAepG,SAAQ,SAAUkK,GACjD,IAAKX,GAAe,CAClB,IAAIY,EAAYxC,EAAQwC,UAEpBA,GAAaA,EAAUD,IAAUC,EAAUD,GAAOR,KACpD1M,EAAUmN,EAAUD,GAAOR,UACpBS,EAAUD,GAAOR,GAEqB,IAAzCzN,OAAOoD,KAAK8K,EAAUD,IAAQ5L,eACzB6L,EAAUD,GAGmB,IAAlCjO,OAAOoD,KAAK8K,GAAW7L,eAClBqJ,EAAQwC,WAKrBxC,EAAQmC,oBAAoBI,EAAOlN,EAASxB,MAWhD,SAAS4O,GAAYzC,EAAShM,EAAM+N,GAClC,IAAIlO,EAAUsE,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK,GAC9EuK,EAAWX,EACf/N,EAAK8M,OAAOwB,MAAM7D,IAAepG,SAAQ,SAAUkK,GACjD,GAAI1O,EAAQiO,OAASF,GAAe,CAClC,IAAIe,EAAqB3C,EAAQwC,UAC7BA,OAAmC,IAAvBG,EAAgC,GAAKA,EAErDD,EAAW,kBACFF,EAAUD,GAAOR,GACxB/B,EAAQmC,oBAAoBI,EAAOG,EAAU7O,GAE7C,IAAK,IAAI+O,EAAQzK,UAAUxB,OAAQgJ,EAAO,IAAI1L,MAAM2O,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFlD,EAAKkD,GAAS1K,UAAU0K,GAG1Bd,EAAS9J,MAAM+H,EAASL,IAGrB6C,EAAUD,KACbC,EAAUD,GAAS,IAGjBC,EAAUD,GAAOR,IACnB/B,EAAQmC,oBAAoBI,EAAOC,EAAUD,GAAOR,GAAWlO,GAGjE2O,EAAUD,GAAOR,GAAYW,EAC7B1C,EAAQwC,UAAYA,EAGtBxC,EAAQkC,iBAAiBK,EAAOG,EAAU7O,MAW9C,SAASiP,GAAc9C,EAAShM,EAAMO,GACpC,IAAIgO,EAaJ,OAXIjD,GAAWyD,QAAUzD,GAAW0D,aAClCT,EAAQ,IAAIS,YAAYhP,EAAM,CAC5BiP,OAAQ1O,EACR2O,SAAS,EACTC,YAAY,KAGdZ,EAAQjH,SAAS8H,YAAY,eAC7Bb,EAAMc,gBAAgBrP,GAAM,GAAM,EAAMO,IAGnCyL,EAAQ8C,cAAcP,GAQ/B,SAASe,GAAUtD,GACjB,IAAIuD,EAAMvD,EAAQwD,wBAClB,MAAO,CACLC,KAAMF,EAAIE,MAAQpI,OAAOqI,YAAcpI,SAASG,gBAAgBkI,YAChEC,IAAKL,EAAIK,KAAOvI,OAAOwI,YAAcvI,SAASG,gBAAgBqI,YASlE,SAASC,GAAcC,GACrB,IAAIC,EAASD,EAAKC,OACdC,EAASF,EAAKE,OACdC,EAASH,EAAKG,OACdC,EAAaJ,EAAKI,WAClBC,EAAaL,EAAKK,WAClBC,EAAS,GAETxF,GAASsF,IAA8B,IAAfA,GAC1BE,EAAOtM,KAAK,cAAcgE,OAAOoI,EAAY,QAG3CtF,GAASuF,IAA8B,IAAfA,GAC1BC,EAAOtM,KAAK,cAAcgE,OAAOqI,EAAY,QAI3CvF,GAASmF,IAAsB,IAAXA,GACtBK,EAAOtM,KAAK,UAAUgE,OAAOiI,EAAQ,SAGnCnF,GAASoF,IAAsB,IAAXA,GACtBI,EAAOtM,KAAK,UAAUgE,OAAOkI,EAAQ,MAGnCpF,GAASqF,IAAsB,IAAXA,GACtBG,EAAOtM,KAAK,UAAUgE,OAAOmI,EAAQ,MAGvC,IAAII,EAAYD,EAAO3N,OAAS2N,EAAOE,KAAK,KAAO,OACnD,MAAO,CACLC,gBAAiBF,EACjBG,YAAaH,EACbA,UAAWA,GAYf,SAASI,GAAoBlK,GAC3B,OAAOkE,GAASlE,GAAOmK,mBAAmBnK,EAAI6F,QAAQ,QAAS,IAAIA,QAAQ,WAAY,KAAO,GAEhG,IAAIuE,GAAYtJ,EAAOuJ,WAAa,6CAA6C1E,KAAK7E,EAAOuJ,UAAUC,WASvG,SAASC,GAAqBC,EAAOpR,EAAS0L,GAC5C,IAAI2F,EAAW5J,SAAS6J,cAAc,OAEtC,GAAIF,EAAMG,eAAiBP,GAEzB,OADAtF,EAAS0F,EAAMG,aAAcH,EAAMI,eAC5BH,EAGT,IAAII,EAAOhK,SAASgK,MAAQhK,SAASG,gBAyBrC,OAvBAyJ,EAASK,OAAS,WAChBhG,EAAS2F,EAASM,MAAON,EAASO,QAE7BZ,IACHS,EAAKI,YAAYR,IAIrB7M,GAAQxE,EAAQoF,qBAAqB,SAAUsI,GAC7C,IAAIjK,EAAQ2N,EAAMxD,aAAaF,GAEjB,OAAVjK,GACF4N,EAASvD,aAAaJ,EAAMjK,MAGhC4N,EAASS,IAAMV,EAAMU,IAGhBd,KACHK,EAAShF,MAAM0F,QAAU,uJACzBN,EAAKO,YAAYX,IAGZA,EAQT,SAASY,GAAmB9R,GAC1B,OAAQA,GACN,KAAK,EACH,OAAOyI,EAET,KAAK,EACH,OAAOD,EAET,KAAK,EACH,OAAOD,EAET,QACE,MAAO,IASb,SAASwJ,GAAgBC,GACvB,IAAIC,EAAY/N,EAAe,GAAI8N,GAE/BE,EAAS,GAiBb,OAhBA7N,GAAQ2N,GAAU,SAAUG,EAASC,UAC5BH,EAAUG,GACjB/N,GAAQ4N,GAAW,SAAUI,GAC3B,IAAIC,EAAKC,KAAKC,IAAIL,EAAQM,OAASJ,EAASI,QACxCC,EAAKH,KAAKC,IAAIL,EAAQQ,OAASN,EAASM,QACxCC,EAAKL,KAAKC,IAAIL,EAAQU,KAAOR,EAASQ,MACtCC,EAAKP,KAAKC,IAAIL,EAAQY,KAAOV,EAASU,MACtCC,EAAKT,KAAKU,KAAKX,EAAKA,EAAKI,EAAKA,GAC9BQ,EAAKX,KAAKU,KAAKL,EAAKA,EAAKE,EAAKA,GAC9BK,GAASD,EAAKF,GAAMA,EACxBd,EAAOlO,KAAKmP,SAGhBjB,EAAOkB,MAAK,SAAUC,EAAGC,GACvB,OAAOf,KAAKC,IAAIa,GAAKd,KAAKC,IAAIc,MAEzBpB,EAAO,GAShB,SAASqB,GAAWC,EAAOC,GACzB,IAAIC,EAAQF,EAAME,MACdC,EAAQH,EAAMG,MACdC,EAAM,CACRf,KAAMa,EACNX,KAAMY,GAER,OAAOF,EAAUG,EAAM1P,EAAe,CACpC2P,UAAWC,KAAKC,MAChBtB,OAAQiB,EACRf,OAAQgB,GACPC,GAQL,SAASI,GAAkBhC,GACzB,IAAI0B,EAAQ,EACRC,EAAQ,EACRM,EAAQ,EAUZ,OATA5P,GAAQ2N,GAAU,SAAUkC,GAC1B,IAAIzB,EAASyB,EAAMzB,OACfE,EAASuB,EAAMvB,OACnBe,GAASjB,EACTkB,GAAShB,EACTsB,GAAS,KAEXP,GAASO,EACTN,GAASM,EACF,CACLP,MAAOA,EACPC,MAAOA,GAIX,IAAIvU,GAAS,CACXA,OAAQ,WACNE,KAAK6U,gBACL7U,KAAK8U,aACL9U,KAAK+U,WACL/U,KAAKgV,gBAEPC,SAAU,WACR,IAAIC,EAAgBlV,KAAK0M,QAAQwI,cAC7BlD,EAAOkD,EAAclD,MAAQkD,EAAc/M,gBAC/CnI,KAAKgS,KAAOA,EACZhS,KAAKmV,eAAiBpN,OAAOqN,WAAaF,EAAc/M,gBAAgBkN,YACxErV,KAAKsV,wBAA0BtD,EAAKpF,MAAM2I,aAC1CvV,KAAKwV,gCAAkCzN,OAAO0N,iBAAiBzD,GAAMuD,cAEvEV,cAAe,WACb7U,KAAK0V,cAAgB,CACnBxD,MAAOnK,OAAOqN,WACdjD,OAAQpK,OAAO4N,cAGnBb,WAAY,WACV,IAEIc,EAFArV,EAAUP,KAAKO,QACfsV,EAAS7V,KAAK6V,OAGdtV,EAAQsF,SACV+P,EAAa,CACX1D,MAAOe,KAAK6C,IAAID,EAAOE,YAAaxV,EAAQ2F,UAC5CiM,OAAQc,KAAK6C,IAAID,EAAOG,aAAczV,EAAQ4F,YAEhDnG,KAAKiW,WAAaL,IAGhB5V,KAAKkW,QAAWN,IAClBA,EAAa5V,KAAK0V,eAGpB1V,KAAK4V,WAAazJ,GAAO,GAAIyJ,IAE/BZ,aAAc,WACRhV,KAAKO,QAAQsF,SAAW7F,KAAKkW,QAC/BzJ,GAASzM,KAAKmW,OAAQnW,KAAK4V,aAG/Bb,SAAU,WACR,IAAIqB,EAAQpW,KAER0M,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACf8V,EAAOrW,KAAKqW,KACZC,EAAQ,GAEZD,EAAKE,UAAY,GACjBxR,GAAQ/E,KAAKM,QAAQ,SAAUqR,EAAO6E,GACpC,IAAInE,EAAMV,EAAMU,IACZoE,EAAM9E,EAAM8E,KAAOpF,GAAoBgB,GAEvClL,EAAMiP,EAAMM,YAAY/E,GAE5B,GAAIU,GAAOlL,EAAK,CACd,IAAIwP,EAAO3O,SAAS6J,cAAc,MAC9B+E,EAAM5O,SAAS6J,cAAc,OACjC9M,GAAQxE,EAAQoF,qBAAqB,SAAUsI,GAC7C,IAAIjK,EAAQ2N,EAAMxD,aAAaF,GAEjB,OAAVjK,GACF4S,EAAIvI,aAAaJ,EAAMjK,MAG3B4S,EAAIvE,IAAMA,GAAOlL,EACjByP,EAAIH,IAAMA,EACVG,EAAIvI,aAAa,aAAcmI,GAC/BI,EAAIvI,aAAa,oBAAqBlH,GAAOkL,GAC7CuE,EAAIvI,aAAa,qBAAsB,QACvCuI,EAAIvI,aAAa,OAAQ,UACzBsI,EAAKpE,YAAYqE,GACjBP,EAAK9D,YAAYoE,GACjBL,EAAM5R,KAAKiS,OAGf3W,KAAKsW,MAAQA,EACbvR,GAAQuR,GAAO,SAAUK,GACvB,IAAIhF,EAAQgF,EAAKE,kBACjBzI,GAAQuD,EAAO,UAAU,GAErBpR,EAAQyF,SACVqH,GAASsJ,EAAMrN,GAGjB6F,GAAYwC,EAAO1H,GAAY,SAAUgF,GACnC1O,EAAQyF,SACVyH,GAAYkJ,EAAMrN,GAGpB8M,EAAMU,UAAU7H,KACf,CACDT,MAAM,OAINjO,EAAQsG,YACVsI,GAAYzC,EAAS5B,GAAc,WACjCuC,GAASgJ,EAAM3M,KACd,CACD8E,MAAM,KAIZuI,WAAY,SAAoBP,GAC9B,IAAIpT,EAAIoT,GAASxW,KAAKwW,MAClBtE,EAAQlS,KAAKsW,MAAMlT,GAAG2S,aAAe,GACrCiB,EAAa9E,EAAQ,EAGzBzF,GAASzM,KAAKqW,KAAMlK,GAAO,CACzB+F,MAAO8E,EAAahX,KAAKqD,QACxBoN,GAAc,CACfK,YAAa9Q,KAAK4V,WAAW1D,MAAQA,GAAS,EAAI8E,EAAa5T,OAGnE6T,UAAW,WACT,IAAIZ,EAAOrW,KAAKqW,KAChBA,EAAKE,UAAY,GACjB9I,GAAY4I,EAAM3M,GAClB+C,GAAS4J,EAAM5F,GAAc,CAC3BK,WAAY,MAGhBoG,UAAW,SAAmBC,GAC5B,IASIC,EATAC,EAASrX,KAETO,EAAUP,KAAKO,QACfoR,EAAQ3R,KAAK2R,MACbiE,EAAa5V,KAAK4V,WAClB0B,EAAetX,KAAKuX,OAAOvB,aAC3BwB,EAAc5B,EAAW1D,MACzBuF,EAAexE,KAAK6C,IAAIF,EAAWzD,OAASmF,EAAcA,GAC1DI,EAAe1X,KAAK2X,WAAa,GAErC3X,KAAK4X,kBAAoB,CACvBC,MAAO,WACLT,EAAYnF,OAAS,OAGzBmF,EAAc1F,GAAqBC,EAAOpR,GAAS,SAAUuR,EAAcC,GACzE,IAAI+F,EAAchG,EAAeC,EAC7BG,EAAQsF,EACRrF,EAASsF,EACbJ,EAAOO,mBAAoB,EAEvBH,EAAeK,EAAcN,EAC/BrF,EAASqF,EAAcM,EAEvB5F,EAAQuF,EAAeK,EAGzB5F,EAAQe,KAAK8E,IAAY,GAAR7F,EAAaJ,GAC9BK,EAASc,KAAK8E,IAAa,GAAT5F,EAAcJ,GAChC,IAAI4F,EAAY,CACd7F,aAAcA,EACdC,cAAeA,EACf+F,YAAaA,EACbjE,MAAO3B,EAAQJ,EACfI,MAAOA,EACPC,OAAQA,EACRhC,MAAOqH,EAActF,GAAS,EAC9B5B,KAAMmH,EAAetF,GAAU,GAE7B6F,EAAmB7L,GAAO,GAAIwL,GAE9BpX,EAAQ8F,YACVsR,EAAUhH,OAAS+G,EAAa/G,QAAU,EAC1CqH,EAAiBrH,OAAS,GAGxBpQ,EAAQ+F,WACVqR,EAAU/G,OAAS8G,EAAa9G,QAAU,EAC1C+G,EAAU9G,OAAS6G,EAAa7G,QAAU,EAC1CmH,EAAiBpH,OAAS,EAC1BoH,EAAiBnH,OAAS,GAG5BwG,EAAOM,UAAYA,EACnBN,EAAOW,iBAAmBA,EAEtBb,GACFA,QAINc,YAAa,SAAqBd,GAChC,IAAIe,EAASlY,KAET2R,EAAQ3R,KAAK2R,MACbgG,EAAY3X,KAAK2X,UASrB,GARAlL,GAASkF,EAAOxF,GAAO,CACrB+F,MAAOyF,EAAUzF,MACjBC,OAAQwF,EAAUxF,OAElBgG,WAAYR,EAAUxH,KACtBiI,UAAWT,EAAUrH,KACpBG,GAAckH,KAEbR,EACF,IAAKnX,KAAKqY,SAAWrY,KAAKsY,UAAYtY,KAAKO,QAAQsG,WAAY,CAC7D,IAAI0R,EAAkB,WACpBL,EAAOM,gBAAiB,EACxBrB,KAGFnX,KAAKwY,eAAiB,CACpBX,MAAO,WACL/I,GAAe6C,EAAO/G,EAAsB2N,KAGhDpJ,GAAYwC,EAAO/G,EAAsB2N,EAAiB,CACxD/J,MAAM,SAGR2I,KAINsB,WAAY,WAEV,GAAIzY,KAAKqY,SAAWrY,KAAK0H,OAAQ,CAC/B,IAAIiK,EAAQ3R,KAAK2R,MAEb3R,KAAKqY,SACPrY,KAAKqY,QAAQR,QAGflG,EAAM+G,WAAWtG,YAAYT,GAC7B3R,KAAK2R,MAAQ,QAKfgH,GAAS,CACXC,KAAM,WACJ,IAAIrY,EAAUP,KAAKO,QACf4V,EAASnW,KAAKmW,OACd0C,EAAS7Y,KAAK6Y,OACd7Q,EAAWhI,KAAK0M,QAAQwI,cAC5B/F,GAAYgH,EAAQxM,EAAa3J,KAAK8Y,QAAU9Y,KAAK+Y,MAAMH,KAAK5Y,OAChEmP,GAAYgH,EAAQtM,EAAkB7J,KAAKgZ,YAAchZ,KAAKiZ,UAAUL,KAAK5Y,OAC7EmP,GAAY0J,EAAQxO,EAAoBrK,KAAKkZ,cAAgBlZ,KAAKmZ,YAAYP,KAAK5Y,OACnFmP,GAAYnH,EAAUsC,EAAoBtK,KAAKoZ,cAAgBpZ,KAAKqZ,YAAYT,KAAK5Y,OACrFmP,GAAYnH,EAAUuC,EAAkBvK,KAAKsZ,YAActZ,KAAKuZ,UAAUX,KAAK5Y,OAC/EmP,GAAYnH,EAAUgC,EAAgBhK,KAAKwZ,UAAYxZ,KAAKyZ,QAAQb,KAAK5Y,OACzEmP,GAAYpH,OAAQ0C,EAAczK,KAAK0Z,SAAW1Z,KAAK2Z,OAAOf,KAAK5Y,OAE/DO,EAAQgG,UAAYhG,EAAQkG,aAC9B0I,GAAYgH,EAAQpL,GAAa/K,KAAK4Z,QAAU5Z,KAAK6Z,MAAMjB,KAAK5Y,MAAO,CACrE8Z,SAAS,EACTC,SAAS,IAITxZ,EAAQoG,kBACVwI,GAAY0J,EAAQjP,EAAgB5J,KAAKga,WAAaha,KAAKia,SAASrB,KAAK5Y,QAG7Eka,OAAQ,WACN,IAAI3Z,EAAUP,KAAKO,QACf4V,EAASnW,KAAKmW,OACd0C,EAAS7Y,KAAK6Y,OACd7Q,EAAWhI,KAAK0M,QAAQwI,cAC5BpG,GAAeqH,EAAQxM,EAAa3J,KAAK8Y,SACzChK,GAAeqH,EAAQtM,EAAkB7J,KAAKgZ,aAC9ClK,GAAe+J,EAAQxO,EAAoBrK,KAAKkZ,eAChDpK,GAAe9G,EAAUsC,EAAoBtK,KAAKoZ,eAClDtK,GAAe9G,EAAUuC,EAAkBvK,KAAKsZ,aAChDxK,GAAe9G,EAAUgC,EAAgBhK,KAAKwZ,WAC9C1K,GAAe/G,OAAQ0C,EAAczK,KAAK0Z,UAEtCnZ,EAAQgG,UAAYhG,EAAQkG,aAC9BqI,GAAeqH,EAAQpL,GAAa/K,KAAK4Z,QAAS,CAChDE,SAAS,EACTC,SAAS,IAITxZ,EAAQoG,kBACVmI,GAAe+J,EAAQjP,EAAgB5J,KAAKga,cAK9CG,GAAW,CACbpB,MAAO,SAAe9J,GACpB,IAAI9L,EAAS8L,EAAM9L,OACf5C,EAAUP,KAAKO,QACfoX,EAAY3X,KAAK2X,UACjByC,EAASpM,GAAQ7K,EAAQ+H,IAM7B,OAJIhD,GAAmB+G,EAAMoL,WAAalX,IAAWnD,KAAK6Y,QACxDyB,aAAata,KAAKua,oBAGZH,GACN,IAAK,MACCpa,KAAKwa,OACPxa,KAAKya,OACIla,EAAQsF,OACb7F,KAAKkW,OACPlW,KAAK0a,OAEL1a,KAAK2a,OAGP3a,KAAKuH,OAGP,MAEF,IAAK,OACHvH,KAAKuH,OACL,MAEF,IAAK,OACHvH,KAAKyH,KAAKuG,GAAQ7K,EAAQ,UAC1B,MAEF,IAAK,UACHnD,KAAK2H,KAAK,IAAK,GACf,MAEF,IAAK,WACH3H,KAAK2H,MAAM,IAAK,GAChB,MAEF,IAAK,aACH3H,KAAK4a,SACL,MAEF,IAAK,QACH5a,KAAK6a,QACL,MAEF,IAAK,OACH7a,KAAK8a,KAAKva,EAAQ0F,MAClB,MAEF,IAAK,OACHjG,KAAK+a,KAAKxa,EAAQmF,YAClB,MAEF,IAAK,OACH1F,KAAKgb,KAAKza,EAAQ0F,MAClB,MAEF,IAAK,cACHjG,KAAK2Q,QAAQ,IACb,MAEF,IAAK,eACH3Q,KAAK2Q,OAAO,IACZ,MAEF,IAAK,kBACH3Q,KAAK4Q,QAAQ+G,EAAU/G,SAAW,GAClC,MAEF,IAAK,gBACH5Q,KAAK6Q,QAAQ8G,EAAU9G,SAAW,GAClC,MAEF,QACM7Q,KAAKwa,QACPxa,KAAKya,SAKbR,SAAU,SAAkBhL,GAC1BA,EAAMgM,iBAEFjb,KAAK0H,QAAUuH,EAAM9L,SAAWnD,KAAK2R,QAEnCzJ,GAAmB+G,EAAMoL,WAC3BC,aAAata,KAAKkb,yBAGpBlb,KAAK4a,WAGTO,KAAM,WACJ,IAAI/E,EAAQpW,KAERA,KAAKob,UACPd,aAAata,KAAKob,SAClBpb,KAAKob,SAAU,GAGjB,IAAI1O,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACfoR,EAAQ3R,KAAK2R,MACb6E,EAAQxW,KAAKwW,MACbZ,EAAa5V,KAAK4V,WACtBnI,GAAYkE,EAAOtI,GAEf9I,EAAQyF,SACVyH,GAAYzN,KAAK6Y,OAAQvP,GAG3BqI,EAAM/E,MAAM0F,QAAU,YAAc,eAAe5J,OAAOkN,EAAW1D,MAAQ,EAAG,OAAS,cAAcxJ,OAAOkN,EAAWzD,OAAS,EAAG,OAA/G,sDACtBnS,KAAKkX,WAAU,WACbvJ,GAAYgE,EAAOpI,EAAYhJ,EAAQ6F,SACvCuH,GAAYgE,EAAOjI,EAAkBnJ,EAAQsG,YAE7CuP,EAAM6B,aAAY,WAChB7B,EAAM1O,QAAS,EACf0O,EAAMiC,SAAU,EAEZrM,GAAWzL,EAAQmH,SACrByH,GAAYzC,EAAS5B,EAAcvK,EAAQmH,OAAQ,CACjD8G,MAAM,IAIVgB,GAAc9C,EAAS5B,EAAc,CACnCuQ,cAAejF,EAAM9V,OAAOkW,GAC5BA,MAAOA,EACP7E,MAAOA,WAKfmF,UAAW,SAAmB7H,GAC5B,IAAI0C,EAAQ1C,EAAM9L,OACd0S,EAASlE,EAAM+G,WACf4C,EAAczF,EAAOE,aAAe,GACpCwF,EAAe1F,EAAOG,cAAgB,GACtCwF,IAAWxN,GAAQ2D,EAAO,UAC9BD,GAAqBC,EAAO3R,KAAKO,SAAS,SAAUuR,EAAcC,GAChE,IAAI+F,EAAchG,EAAeC,EAC7BG,EAAQoJ,EACRnJ,EAASoJ,EAETA,EAAezD,EAAcwD,EAC3BE,EACFtJ,EAAQqJ,EAAezD,EAEvB3F,EAASmJ,EAAcxD,EAEhB0D,EACTrJ,EAASmJ,EAAcxD,EAEvB5F,EAAQqJ,EAAezD,EAGzBrL,GAASkF,EAAOxF,GAAO,CACrB+F,MAAOA,EACPC,OAAQA,GACP1B,GAAc,CACfK,YAAawK,EAAcpJ,GAAS,EACpCnB,YAAawK,EAAepJ,GAAU,UAI5CsH,QAAS,SAAiBxK,GACxB,IAAI1O,EAAUP,KAAKO,QAEnB,GAAKP,KAAKkW,QAAW3V,EAAQwF,SAI7B,OAAQkJ,EAAMwM,SAAWxM,EAAMyM,OAASzM,EAAM0M,UAE5C,KAAK,GACC3b,KAAKwa,OACPxa,KAAKya,OACIla,EAAQsF,OACb7F,KAAKkW,QACPlW,KAAK0a,OAGP1a,KAAKuH,OAGP,MAGF,KAAK,GACCvH,KAAKwa,QACPxa,KAAKya,OAGP,MAGF,KAAK,GACHza,KAAK8a,KAAKva,EAAQ0F,MAClB,MAGF,KAAK,GAEHgJ,EAAMgM,iBAENjb,KAAK2H,KAAKpH,EAAQyG,WAAW,GAC7B,MAGF,KAAK,GACHhH,KAAKgb,KAAKza,EAAQ0F,MAClB,MAGF,KAAK,GAEHgJ,EAAMgM,iBAENjb,KAAK2H,MAAMpH,EAAQyG,WAAW,GAC9B,MAGF,KAAK,GAIL,KAAK,GACCiI,EAAM2M,UACR3M,EAAMgM,iBACNjb,KAAK4a,UAGP,QAGN3B,UAAW,SAAmBhK,GACe,QAAvCA,EAAM9L,OAAO0Y,QAAQ9N,eACvBkB,EAAMgM,kBAGV9B,YAAa,SAAqBlK,GAChC,IAAI1O,EAAUP,KAAKO,QACfmS,EAAW1S,KAAK0S,SAChBoJ,EAAU7M,EAAM6M,QAChB1W,EAAS6J,EAAM7J,OAEnB,MAAKpF,KAAK0H,QAAU1H,KAAK+b,SAAW/b,KAAKqY,SAAWrY,KAAKgc,SACtC,cAAf/M,EAAMvO,MAAuC,gBAAfuO,EAAMvO,MAAgD,UAAtBuO,EAAMgN,eACxEzQ,GAASsQ,IAAwB,IAAZA,GAAiBtQ,GAASpG,IAAsB,IAAXA,GACvD6J,EAAM2M,UAHT,CAQA3M,EAAMgM,iBAEFhM,EAAMiN,eACRnX,GAAQkK,EAAMiN,gBAAgB,SAAUC,GACtCzJ,EAASyJ,EAAMC,YAAcnI,GAAWkI,MAG1CzJ,EAASzD,EAAM6D,WAAa,GAAKmB,GAAWhF,GAG9C,IAAImL,IAAS7Z,EAAQ6F,SAAUkC,EAE3B/H,EAAQiG,aAAejG,EAAQgG,UAAYvF,OAAOoD,KAAKsO,GAAUrP,OAAS,EAC5E+W,EAAS5R,EACAjI,EAAQmG,eAAuC,UAAtBuI,EAAMgN,aAA0C,eAAfhN,EAAMvO,OAA0BV,KAAKqc,iBACxGjC,EAAS7R,IAGPhI,EAAQsG,YAAeuT,IAAW9R,GAAe8R,IAAW5R,GAC9DiF,GAAYzN,KAAK2R,MAAOjI,GAG1B1J,KAAKoa,OAASA,IAEhBf,YAAa,SAAqBpK,GAChC,IAAIyD,EAAW1S,KAAK0S,SAChB0H,EAASpa,KAAKoa,OAEbpa,KAAK0H,QAAW0S,IAIrBnL,EAAMgM,iBAEFhM,EAAMiN,eACRnX,GAAQkK,EAAMiN,gBAAgB,SAAUC,GACtChQ,GAAOuG,EAASyJ,EAAMC,aAAe,GAAInI,GAAWkI,GAAO,OAG7DhQ,GAAOuG,EAASzD,EAAM6D,WAAa,IAAM,GAAImB,GAAWhF,GAAO,IAGjEjP,KAAKsc,OAAOrN,KAEdsK,UAAW,SAAmBtK,GAC5B,IAKI4D,EALAwE,EAASrX,KAETO,EAAUP,KAAKO,QACf6Z,EAASpa,KAAKoa,OACd1H,EAAW1S,KAAK0S,SAGhBzD,EAAMiN,eACRnX,GAAQkK,EAAMiN,gBAAgB,SAAUC,GACtCtJ,EAAUH,EAASyJ,EAAMC,mBAClB1J,EAASyJ,EAAMC,gBAGxBvJ,EAAUH,EAASzD,EAAM6D,WAAa,UAC/BJ,EAASzD,EAAM6D,WAAa,IAGhCsH,IAILnL,EAAMgM,kBAEF1a,EAAQsG,YAAeuT,IAAW9R,GAAe8R,IAAW5R,GAC9D6E,GAASrN,KAAK2R,MAAOjI,GAGvB1J,KAAKoa,QAAS,EAEVlS,GAAmBkS,IAAW5R,GAAeqK,GAAW2B,KAAKC,MAAQ5B,EAAQ0B,UAAY,MAC3F+F,aAAata,KAAKua,oBAClBD,aAAata,KAAKkb,yBAEd3a,EAAQoG,kBAAoB3G,KAAK0H,QAAUuH,EAAM9L,SAAWnD,KAAK2R,MAC/D3R,KAAKuc,cACPvc,KAAKuc,cAAe,EAEpBvc,KAAKkb,wBAA0BsB,YAAW,WACxChN,GAAc6H,EAAO1F,MAAO/H,KAC3B,MAEH5J,KAAKuc,cAAe,EAEpBvc,KAAKkb,wBAA0BsB,YAAW,WACxCnF,EAAOkF,cAAe,IACrB,OAGLvc,KAAKuc,cAAe,EAEhBhc,EAAQ4E,UAAiC,WAArB5E,EAAQ4E,UAAyB8J,EAAM9L,SAAWnD,KAAK6Y,SAE7E7Y,KAAKua,mBAAqBiC,YAAW,WACnChN,GAAc6H,EAAOwB,OAAQlP,KAC5B,SAKXgQ,OAAQ,WACN,IAAIzB,EAASlY,KAEb,GAAKA,KAAKyc,UAAWzc,KAAKgc,SAItBhc,KAAKkW,SACPlW,KAAK0c,QACL1c,KAAKiV,WACLjV,KAAK2c,QAGP3c,KAAK6U,gBACL7U,KAAK8U,aACL9U,KAAKgV,eACLhV,KAAK+W,aAED/W,KAAK0H,QACP1H,KAAKkX,WAAU,WACbgB,EAAOD,iBAIPjY,KAAKwa,QAAQ,CACf,GAAIxa,KAAKO,QAAQmF,YAAc1F,KAAKkW,UAAYlO,SAAS4U,mBAAqB5U,SAAS6U,yBAA2B7U,SAAS8U,sBAAwB9U,SAAS+U,qBAE1J,YADA/c,KAAKya,OAIP1V,GAAQ/E,KAAKgd,OAAOC,qBAAqB,QAAQ,SAAUtL,GACzDxC,GAAYwC,EAAO1H,EAAYiO,EAAOpB,UAAU8B,KAAKV,GAAS,CAC5D1J,MAAM,IAERgB,GAAcmC,EAAO1H,QAI3B4P,MAAO,SAAe5K,GACpB,IAAIiO,EAASld,KAEb,GAAKA,KAAK0H,SAIVuH,EAAMgM,kBAEFjb,KAAKmd,UAAT,CAIAnd,KAAKmd,UAAW,EAChBX,YAAW,WACTU,EAAOC,UAAW,IACjB,IACH,IAAItJ,EAAQtI,OAAOvL,KAAKO,QAAQyG,YAAc,GAC1CoW,EAAQ,EAERnO,EAAMoO,OACRD,EAAQnO,EAAMoO,OAAS,EAAI,GAAK,EACvBpO,EAAMqO,WACfF,GAASnO,EAAMqO,WAAa,IACnBrO,EAAMU,SACfyN,EAAQnO,EAAMU,OAAS,EAAI,GAAK,GAGlC3P,KAAK2H,MAAMyV,EAAQvJ,GAAO,EAAM5E,MAIhC9N,GAAU,CAKZkG,KAAM,WACJ,IAAIkW,EAAY1Y,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GAC3E6H,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QAEnB,GAAIA,EAAQsF,QAAU7F,KAAK+b,SAAW/b,KAAKyc,SAAWzc,KAAK+b,QACzD,OAAO/b,KAGT,IAAKA,KAAKoH,MAOR,OANApH,KAAKwd,QAEDxd,KAAKoH,OACPpH,KAAKqH,KAAKkW,GAGLvd,KAST,GANIgM,GAAWzL,EAAQ8G,OACrB8H,GAAYzC,EAAShC,EAAYnK,EAAQ8G,KAAM,CAC7CmH,MAAM,KAIiC,IAAvCgB,GAAc9C,EAAShC,KAA0B1K,KAAKoH,MACxD,OAAOpH,KAGLA,KAAKgc,QACPhc,KAAKyd,cAAc5F,QAGrB7X,KAAK+b,SAAU,EACf/b,KAAK2c,OACL,IAAIxG,EAASnW,KAAKmW,OAGlB,GAFA1I,GAAY0I,EAAQnN,GAEhBzI,EAAQsG,aAAe0W,EAAW,CACpC,IAAIjW,EAAQtH,KAAKsH,MAAMsR,KAAK5Y,MAC5BA,KAAKyd,cAAgB,CACnB5F,MAAO,WACL/I,GAAeqH,EAAQvL,EAAsBtD,GAC7CmG,GAAY0I,EAAQ/M,KAGxBiE,GAAS8I,EAAQzM,GAEjByM,EAAOuH,mBAAqBvH,EAAOJ,YACnC5G,GAAYgH,EAAQvL,EAAsBtD,EAAO,CAC/CkH,MAAM,IAERnB,GAAS8I,EAAQ/M,QAEjBiE,GAAS8I,EAAQ/M,GACjBpJ,KAAKsH,QAGP,OAAOtH,MAQTuH,KAAM,WACJ,IAAIgW,EAAY1Y,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GAC3E6H,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QAEnB,GAAIA,EAAQsF,QAAU7F,KAAKgc,SAAYhc,KAAKyc,UAAWzc,KAAK+b,QAC1D,OAAO/b,KAST,GANIgM,GAAWzL,EAAQgH,OACrB4H,GAAYzC,EAAS3C,EAAYxJ,EAAQgH,KAAM,CAC7CiH,MAAM,KAIiC,IAAvCgB,GAAc9C,EAAS3C,GACzB,OAAO/J,KAGLA,KAAK+b,SACP/b,KAAKyd,cAAc5F,QAGrB7X,KAAKgc,QAAS,EAEVhc,KAAKwa,OACPxa,KAAKya,OACIza,KAAKqY,SACdrY,KAAKqY,QAAQR,QAGf,IAAI1B,EAASnW,KAAKmW,OAElB,GAAI5V,EAAQsG,YAAcoG,GAASjN,KAAK2R,MAAOjI,KAAsB6T,EAAW,CAC9E,IAAI/V,EAASxH,KAAKwH,OAAOoR,KAAK5Y,MAE1BuH,EAAO,WAETiV,YAAW,WACTrN,GAAYgH,EAAQvL,EAAsBpD,EAAQ,CAChDgH,MAAM,IAERf,GAAY0I,EAAQ/M,KACnB,IAGLpJ,KAAKyd,cAAgB,CACnB5F,MAAO,WACD7X,KAAK0H,OACPoH,GAAe9O,KAAK2R,MAAO/G,EAAsBrD,GAEjDuH,GAAeqH,EAAQvL,EAAsBpD,KAK/CxH,KAAK0H,QACPyH,GAAYnP,KAAK2R,MAAO/G,EAAsBrD,EAAM,CAClDiH,MAAM,IAERxO,KAAK2d,OAAO,GAAG,GAAO,GAAO,IAE7BpW,SAGFkG,GAAY0I,EAAQ/M,GACpBpJ,KAAKwH,SAGP,OAAOxH,MAQTyH,KAAM,WACJ,IAAI2O,EAAQpW,KAERwW,EAAQ3R,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK7E,KAAKO,QAAQqF,iBAG7F,GAFA4Q,EAAQjL,OAAOiL,IAAU,EAErBxW,KAAKgc,QAAUhc,KAAKwa,QAAUhE,EAAQ,GAAKA,GAASxW,KAAKqD,QAAUrD,KAAK0H,QAAU8O,IAAUxW,KAAKwW,MACnG,OAAOxW,KAGT,IAAKA,KAAKyc,QAER,OADAzc,KAAKwW,MAAQA,EACNxW,KAAKqH,OAGVrH,KAAKqY,SACPrY,KAAKqY,QAAQR,QAGf,IAAInL,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACf+E,EAAQtF,KAAKsF,MACbuT,EAAS7Y,KAAK6Y,OACdlC,EAAO3W,KAAKsW,MAAME,GAClBI,EAAMD,EAAKiH,cAAc,OACzBzW,EAAM6G,GAAQ4I,EAAK,eACnBH,EAAMG,EAAIzI,aAAa,OACvBwD,EAAQ3J,SAAS6J,cAAc,OAiBnC,GAhBA9M,GAAQxE,EAAQoF,qBAAqB,SAAUsI,GAC7C,IAAIjK,EAAQ4S,EAAIzI,aAAaF,GAEf,OAAVjK,GACF2N,EAAMtD,aAAaJ,EAAMjK,MAG7B2N,EAAMU,IAAMlL,EACZwK,EAAM8E,IAAMA,EAERzK,GAAWzL,EAAQkH,OACrB0H,GAAYzC,EAAS7B,EAAYtK,EAAQkH,KAAM,CAC7C+G,MAAM,KAQH,IAJHgB,GAAc9C,EAAS7B,EAAY,CACrCwQ,cAAerb,KAAKM,OAAOkW,GAC3BA,MAAOA,EACP7E,MAAOA,MACQ3R,KAAKyc,SAAWzc,KAAKgc,QAAUhc,KAAKwa,OACnD,OAAOxa,KAGTA,KAAK2R,MAAQA,EACblE,GAAYzN,KAAKsW,MAAMtW,KAAKwW,OAAQ/N,GACpC4E,GAASsJ,EAAMlO,GACfzI,KAAK0H,QAAS,EACd1H,KAAKwW,MAAQA,EACbxW,KAAK2X,UAAY,GACjBtK,GAASsE,EAAOtI,GAEZ9I,EAAQyF,SACVqH,GAASwL,EAAQvP,GAGnBuP,EAAOtC,UAAY,GACnBsC,EAAOtG,YAAYZ,GAEnB3R,KAAK+W,aAELzR,EAAMiR,UAAY,GAElB,IAMIsH,EANAC,EAAW,WACb,IAAInG,EAAYvB,EAAMuB,UAClB7X,EAASa,MAAMuL,QAAQ3L,EAAQ+E,OAAS/E,EAAQ+E,MAAM,GAAK/E,EAAQ+E,MACvEA,EAAMiR,UAAYxJ,GAAmBf,GAAWlM,GAAUA,EAAOgM,KAAKsK,EAAOzE,EAAOgG,GAAa,GAAGjP,OAAO+N,EAAK,MAAM/N,OAAOiP,EAAU7F,aAAc,OAAUpJ,OAAOiP,EAAU5F,cAAe,OA+CjM,OA3CA5C,GAAYzC,EAAS5B,EAAcgT,EAAU,CAC3CtP,MAAM,IAERxO,KAAKqY,QAAU,CACbR,MAAO,WACL/I,GAAepC,EAAS5B,EAAcgT,GAElCnM,EAAMoM,SACJ/d,KAAKwY,eACPxY,KAAKwY,eAAeX,QACX7X,KAAK4X,mBACd5X,KAAK4X,kBAAkBC,SAIzBlG,EAAMU,IAAM,GACZvD,GAAe6C,EAAO1H,EAAY4T,GAE9B7d,KAAKob,SACPd,aAAata,KAAKob,YAMtBzJ,EAAMoM,SACR/d,KAAKmb,QAELhM,GAAYwC,EAAO1H,EAAY4T,EAAS7d,KAAKmb,KAAKvC,KAAK5Y,MAAO,CAC5DwO,MAAM,IAGJxO,KAAKob,SACPd,aAAata,KAAKob,SAIpBpb,KAAKob,QAAUoB,YAAW,WACxB/O,GAAYkE,EAAOtI,GACnB+M,EAAMgF,SAAU,IACf,MAGEpb,MAST8a,KAAM,WACJ,IAAI7U,EAAOpB,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GACtE2R,EAAQxW,KAAKwW,MAAQ,EAOzB,OALIA,EAAQ,IACVA,EAAQvQ,EAAOjG,KAAKqD,OAAS,EAAI,GAGnCrD,KAAKyH,KAAK+O,GACHxW,MASTgb,KAAM,WACJ,IAAI/U,EAAOpB,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GACtEmZ,EAAWhe,KAAKqD,OAAS,EACzBmT,EAAQxW,KAAKwW,MAAQ,EAOzB,OALIA,EAAQwH,IACVxH,EAAQvQ,EAAO,EAAI+X,GAGrBhe,KAAKyH,KAAK+O,GACHxW,MASTie,KAAM,SAAcC,EAASC,GAC3B,IAAIxG,EAAY3X,KAAK2X,UAErB,OADA3X,KAAKoe,OAAO3S,GAAYyS,GAAWA,EAAUvG,EAAUxH,KAAO5E,OAAO2S,GAAUzS,GAAY0S,GAAWA,EAAUxG,EAAUrH,IAAM/E,OAAO4S,IAChIne,MASToe,OAAQ,SAAgBC,GACtB,IAAIC,EAAIzZ,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAKwZ,EACxE1G,EAAY3X,KAAK2X,UAIrB,GAHA0G,EAAI9S,OAAO8S,GACXC,EAAI/S,OAAO+S,GAEPte,KAAK0H,SAAW1H,KAAKwa,QAAUxa,KAAKO,QAAQ6F,QAAS,CACvD,IAAImY,GAAU,EAEV/S,GAAS6S,KACX1G,EAAUxH,KAAOkO,EACjBE,GAAU,GAGR/S,GAAS8S,KACX3G,EAAUrH,IAAMgO,EAChBC,GAAU,GAGRA,GACFve,KAAKiY,cAIT,OAAOjY,MAUT2H,KAAM,SAAckM,GAClB,IAAI2K,EAAa3Z,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GAE5E4Z,EAAiB5Z,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK,KAErF8S,EAAY3X,KAAK2X,UAUrB,OATA9D,EAAQtI,OAAOsI,GAGbA,EADEA,EAAQ,EACF,GAAK,EAAIA,GAET,EAAIA,EAGd7T,KAAK2d,OAAOhG,EAAUzF,MAAQ2B,EAAQ8D,EAAU7F,aAAc0M,EAAYC,GACnEze,MAWT2d,OAAQ,SAAgB9J,GACtB,IAAIwD,EAASrX,KAETwe,EAAa3Z,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GAE5E4Z,EAAiB5Z,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK,KAErF6Z,EAAY7Z,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GAE3E6H,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACfmS,EAAW1S,KAAK0S,SAChBiF,EAAY3X,KAAK2X,UACjBzF,EAAQyF,EAAUzF,MAClBC,EAASwF,EAAUxF,OACnBhC,EAAOwH,EAAUxH,KACjBG,EAAMqH,EAAUrH,IAChBwB,EAAe6F,EAAU7F,aACzBC,EAAgB4F,EAAU5F,cAG9B,GAFA8B,EAAQZ,KAAK6C,IAAI,EAAGjC,GAEhBrI,GAASqI,IAAU7T,KAAK0H,SAAW1H,KAAKwa,SAAWkE,GAAane,EAAQgG,UAAW,CACrF,IAAKmY,EAAW,CACd,IAAIzX,EAAegM,KAAK6C,IAAI,IAAMvV,EAAQ0G,cACtCC,EAAe+L,KAAK8E,IAAI,IAAKxX,EAAQ2G,cACzC2M,EAAQZ,KAAK8E,IAAI9E,KAAK6C,IAAIjC,EAAO5M,GAAeC,GAG9CuX,GAAkB5K,EAAQ,KAAQA,EAAQ,OAC5CA,EAAQ,GAGV,IAAI8K,EAAW7M,EAAe+B,EAC1B+K,EAAY7M,EAAgB8B,EAC5BkC,EAAc4I,EAAWzM,EACzB8D,EAAe4I,EAAYzM,EAC3B0M,EAAW3M,EAAQJ,EAQvB,GANI9F,GAAWzL,EAAQoH,OACrBwH,GAAYzC,EAAS1B,GAAYzK,EAAQoH,KAAM,CAC7C6G,MAAM,KAQH,IAJHgB,GAAc9C,EAAS1B,GAAY,CACrC6I,MAAOA,EACPgL,SAAUA,EACVC,cAAeL,IAEf,OAAOze,KAKT,GAFAA,KAAKsY,SAAU,EAEXmG,EAAgB,CAClB,IAAIM,EAAS/O,GAAUhQ,KAAKmW,QACxB6I,EAAStM,GAAY1R,OAAOoD,KAAKsO,GAAUrP,OAASqR,GAAkBhC,GAAY,CACpF0B,MAAOqK,EAAerK,MACtBC,MAAOoK,EAAepK,OAGxBsD,EAAUxH,MAAQ4F,IAAgBiJ,EAAO5K,MAAQ2K,EAAO5O,KAAOA,GAAQ+B,GACvEyF,EAAUrH,KAAO0F,IAAiBgJ,EAAO3K,MAAQ0K,EAAOzO,IAAMA,GAAO6B,QAGrEwF,EAAUxH,MAAQ4F,EAAc,EAChC4B,EAAUrH,KAAO0F,EAAe,EAGlC2B,EAAUzF,MAAQyM,EAClBhH,EAAUxF,OAASyM,EACnBjH,EAAU9D,MAAQA,EAClB7T,KAAKiY,aAAY,WACfZ,EAAOiB,SAAU,EAEbtM,GAAWzL,EAAQqH,SACrBuH,GAAYzC,EAASzB,GAAc1K,EAAQqH,OAAQ,CACjD4G,MAAM,IAIVgB,GAAc9C,EAASzB,GAAc,CACnC4I,MAAOA,EACPgL,SAAUA,EACVC,cAAeL,OAIfD,GACFxe,KAAK4G,UAIT,OAAO5G,MAQT2Q,OAAQ,SAAgBsO,GAEtB,OADAjf,KAAKkf,UAAUlf,KAAK2X,UAAUhH,QAAU,GAAKpF,OAAO0T,IAC7Cjf,MAQTkf,SAAU,SAAkBD,GAC1B,IAAItH,EAAY3X,KAAK2X,UAQrB,OAPAsH,EAAS1T,OAAO0T,GAEZzT,GAASyT,IAAWjf,KAAK0H,SAAW1H,KAAKwa,QAAUxa,KAAKO,QAAQ8F,YAClEsR,EAAUhH,OAASsO,EACnBjf,KAAKiY,eAGAjY,MAQT4Q,OAAQ,SAAgBuO,GAEtB,OADAnf,KAAKof,MAAMD,EAASnf,KAAK2X,UAAU9G,QAC5B7Q,MAQT6Q,OAAQ,SAAgBwO,GAEtB,OADArf,KAAKof,MAAMpf,KAAK2X,UAAU/G,OAAQyO,GAC3Brf,MASTof,MAAO,SAAexO,GACpB,IAAIC,EAAShM,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK+L,EAC7E+G,EAAY3X,KAAK2X,UAIrB,GAHA/G,EAASrF,OAAOqF,GAChBC,EAAStF,OAAOsF,GAEZ7Q,KAAK0H,SAAW1H,KAAKwa,QAAUxa,KAAKO,QAAQ+F,SAAU,CACxD,IAAIiY,GAAU,EAEV/S,GAASoF,KACX+G,EAAU/G,OAASA,EACnB2N,GAAU,GAGR/S,GAASqF,KACX8G,EAAU9G,OAASA,EACnB0N,GAAU,GAGRA,GACFve,KAAKiY,cAIT,OAAOjY,MAQT+a,KAAM,WACJ,IAAI7C,EAASlY,KAET0F,EAAab,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,IAAmBA,UAAU,GAEhF,IAAK7E,KAAKyc,SAAWzc,KAAKwa,OACxB,OAAOxa,KAGT,IAAIO,EAAUP,KAAKO,QACfyc,EAAShd,KAAKgd,OACda,EAAS7d,KAAK8W,UAAU8B,KAAK5Y,MAC7BqW,EAAO,GACPiJ,EAAQ,EACR9I,EAAQ,EA+BZ,GA9BAxW,KAAKwa,QAAS,EACdxa,KAAKuf,eAAiB1B,EAElBnY,GACF1F,KAAKwf,oBAGPnS,GAAS2P,EAAQvT,GACjB1E,GAAQ/E,KAAKsW,OAAO,SAAUK,EAAMvT,GAClC,IAAIwT,EAAMD,EAAKiH,cAAc,OACzBjM,EAAQ3J,SAAS6J,cAAc,OACnCF,EAAMU,IAAMrE,GAAQ4I,EAAK,eACzBjF,EAAM8E,IAAMG,EAAIzI,aAAa,OAC7BwD,EAAM8N,eAAiB7I,EAAI6I,eAC3BH,GAAS,EACTjS,GAASsE,EAAO/I,GAChB+E,GAAYgE,EAAOjI,EAAkBnJ,EAAQsG,YAEzCoG,GAAS0J,EAAMlO,KACjB4E,GAASsE,EAAOvI,GAChBoN,EAAQpT,GAGViT,EAAK3R,KAAKiN,GACVxC,GAAYwC,EAAO1H,EAAY4T,EAAQ,CACrCrP,MAAM,IAERwO,EAAOzK,YAAYZ,MAGjBnG,GAASjL,EAAQuF,WAAavF,EAAQuF,SAAW,EAAG,CACtD,IAAIiV,EAAO,SAASA,IAClB7C,EAAOwH,QAAUlD,YAAW,WAC1B/O,GAAY4I,EAAKG,GAAQpN,GACzBoN,GAAS,EACTA,EAAQA,EAAQ8I,EAAQ9I,EAAQ,EAChCnJ,GAASgJ,EAAKG,GAAQpN,GACtB2R,MACCxa,EAAQuF,WAGTwZ,EAAQ,GACVvE,IAIJ,OAAO/a,MAGTya,KAAM,WACJ,IAAIyC,EAASld,KAEb,IAAKA,KAAKwa,OACR,OAAOxa,KAGT,IAAIgd,EAAShd,KAAKgd,OASlB,OARAhd,KAAKwa,QAAS,EACdF,aAAata,KAAK0f,SAClB3a,GAAQiY,EAAOC,qBAAqB,QAAQ,SAAUtL,GACpD7C,GAAe6C,EAAO1H,EAAYiT,EAAOqC,mBAE3C9R,GAAYuP,EAAQvT,GACpBuT,EAAOzG,UAAY,GACnBvW,KAAK2f,iBACE3f,MAGT2a,KAAM,WACJ,IAAIiF,EAAS5f,KAETO,EAAUP,KAAKO,QACf4V,EAASnW,KAAKmW,OACdxE,EAAQ3R,KAAK2R,MACb0E,EAAOrW,KAAKqW,KAEhB,OAAKrW,KAAKyc,SAAWzc,KAAKwa,QAAUxa,KAAKkW,SAAW3V,EAAQsF,SAI5D7F,KAAKkW,QAAS,EACdlW,KAAK2c,OACLtP,GAASrN,KAAKoF,OAAQ2D,GAElBxI,EAAQsG,aACV4G,GAAY4I,EAAM3M,GAEd1J,KAAK0H,QACP+F,GAAYkE,EAAOjI,IAIvB2D,GAAS8I,EAAQtN,GACjBsN,EAAO9H,aAAa,QAAS,IAC7B5B,GAAS0J,EAAQ,CACfrP,OAAQvG,EAAQuG,SAElB9G,KAAK6U,gBACL7U,KAAK4V,WAAazJ,GAAO,GAAInM,KAAK0V,eAClC1V,KAAK+W,aAED/W,KAAK0H,QACP1H,KAAKkX,WAAU,WACb0I,EAAO3H,aAAY,WACb1X,EAAQsG,YACV2V,YAAW,WACTnP,GAASsE,EAAOjI,GAChB2D,GAASgJ,EAAM3M,KACd,UA/BF1J,MAwCX0a,KAAM,WACJ,IAAImF,EAAS7f,KAETO,EAAUP,KAAKO,QACf4V,EAASnW,KAAKmW,OACdxE,EAAQ3R,KAAK2R,MACb0E,EAAOrW,KAAKqW,KAEhB,OAAKrW,KAAKyc,UAAWzc,KAAKwa,QAAWxa,KAAKkW,QAAW3V,EAAQsF,QAI7D7F,KAAKkW,QAAS,EACdlW,KAAK0c,QACLjP,GAAYzN,KAAKoF,OAAQ2D,GAErBxI,EAAQsG,aACV4G,GAAY4I,EAAM3M,GAEd1J,KAAK0H,QACP+F,GAAYkE,EAAOjI,IAIvB+D,GAAY0I,EAAQtN,GACpB4D,GAAS0J,EAAQ,CACfrP,OAAQvG,EAAQwG,eAElB/G,KAAK4V,WAAazJ,GAAO,GAAInM,KAAKiW,YAClCjW,KAAKgV,eACLhV,KAAK+W,aAED/W,KAAK0H,QACP1H,KAAKkX,WAAU,WACb2I,EAAO5H,aAAY,WACb1X,EAAQsG,YACV2V,YAAW,WACTnP,GAASsE,EAAOjI,GAChB2D,GAASgJ,EAAM3M,KACd,SAMJ1J,MApCEA,MAuCX4G,QAAS,WACP,IAAIkZ,EAAS9f,KAETO,EAAUP,KAAKO,QACfwf,EAAa/f,KAAK+f,WAClBpI,EAAY3X,KAAK2X,UAErB,OAAK3X,KAAK0H,SAAU1H,KAAKwa,QAAWja,EAAQqG,SAI5CmZ,EAAWC,YAAc,GAAGtX,OAAOuK,KAAKgN,MAAwB,IAAlBtI,EAAU9D,OAAc,KAEjE7T,KAAKkgB,YAgBR5F,aAAata,KAAKkgB,aAfd3f,EAAQsG,YACN7G,KAAKmgB,QACP3Q,GAAcuQ,EAAYnV,GAG5ByC,GAAS0S,EAAYtW,GACrB4D,GAAS0S,EAAYnX,GACrByE,GAAS0S,EAAYrW,GAErBqW,EAAWrC,mBAAqBqC,EAAWhK,YAC3C1I,GAAS0S,EAAY3W,IAErBiE,GAAS0S,EAAYtW,GAMzBzJ,KAAKkgB,YAAc1D,YAAW,WACxBjc,EAAQsG,YACVsI,GAAY4Q,EAAYnV,GAAsB,WAC5C6C,GAAYsS,EAAYtW,GACxBgE,GAAYsS,EAAYnX,GACxB6E,GAAYsS,EAAYrW,GACxBoW,EAAOK,QAAS,IACf,CACD3R,MAAM,IAERf,GAAYsS,EAAY3W,GACxB0W,EAAOK,QAAS,GAEhB1S,GAAYsS,EAAYtW,GAG1BqW,EAAOI,aAAc,IACpB,KACIlgB,MA1CEA,MA6CX4a,OAAQ,WAON,OAN6B,IAAzB5a,KAAK2X,UAAU9D,MACjB7T,KAAK2d,OAAO3d,KAAKgY,iBAAiBnE,OAAO,GAEzC7T,KAAK2d,OAAO,GAAG,GAGV3d,MAGT6a,MAAO,WAML,OALI7a,KAAK0H,SAAW1H,KAAKwa,SACvBxa,KAAK2X,UAAYxL,GAAO,GAAInM,KAAKgY,kBACjChY,KAAKiY,eAGAjY,MAGT0B,OAAQ,WACN,IAAI0e,EAASpgB,KAET0M,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACf8f,EAAQrgB,KAAKqgB,MAEjB,GAAIA,IAAU3T,EAAQgM,WACpB,OAAO1Y,KAAK4B,UAGd,IAAItB,EAAS,GAWb,GAVAyE,GAAQsb,EAAQ,CAAC3T,GAAWA,EAAQ4T,iBAAiB,QAAQ,SAAU3O,GACjE3F,GAAWzL,EAAQgE,QACjBhE,EAAQgE,OAAOuH,KAAKsU,EAAQzO,IAC9BrR,EAAOoE,KAAKiN,GAELyO,EAAO1J,YAAY/E,IAC5BrR,EAAOoE,KAAKiN,OAIXrR,EAAO+C,OACV,OAAOrD,KAMT,GAHAA,KAAKM,OAASA,EACdN,KAAKqD,OAAS/C,EAAO+C,OAEjBrD,KAAKoH,MAAO,CACd,IAAImZ,EAAU,GAkBd,GAjBAxb,GAAQ/E,KAAKsW,OAAO,SAAUK,EAAMvT,GAClC,IAAIwT,EAAMD,EAAKiH,cAAc,OACzBjM,EAAQrR,EAAO8C,GAEfuO,GAASiF,EACPjF,EAAMU,MAAQuE,EAAIvE,KACpBkO,EAAQ7b,KAAKtB,GAGfmd,EAAQ7b,KAAKtB,MAGjBqJ,GAASzM,KAAKqW,KAAM,CAClBnE,MAAO,SAETlS,KAAK+U,WAED/U,KAAKyc,QACP,GAAIzc,KAAKqD,QACP,GAAIrD,KAAK0H,OAAQ,CACf,IAAI8O,EAAQ+J,EAAQnT,QAAQpN,KAAKwW,OAE7BA,GAAS,GACXxW,KAAK0H,QAAS,EACd1H,KAAKyH,KAAKwL,KAAK6C,IAAI9V,KAAKwW,OAASA,EAAQ,GAAI,KAE7CnJ,GAASrN,KAAKsW,MAAMtW,KAAKwW,OAAQ/N,SAIrCzI,KAAK2R,MAAQ,KACb3R,KAAK0H,QAAS,EACd1H,KAAKwW,MAAQ,EACbxW,KAAK2X,UAAY,GACjB3X,KAAK6Y,OAAOtC,UAAY,GACxBvW,KAAKsF,MAAMiR,UAAY,QAI3BvW,KAAKwd,QAGP,OAAOxd,MAGT4B,QAAS,WACP,IAAI8K,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QAEnB,OAAKmM,EAAQrE,IAIbrI,KAAKkC,WAAY,EAEblC,KAAKoH,OACHpH,KAAKwa,QACPxa,KAAKya,OAGHla,EAAQsF,QACN7F,KAAKkW,QACPlW,KAAK0a,OAGP1a,KAAKka,UACIla,KAAKyc,SACVzc,KAAKqY,UACHrY,KAAKwY,eACPxY,KAAKwY,eAAeX,QACX7X,KAAK4X,mBACd5X,KAAK4X,kBAAkBC,SAIvB7X,KAAKgc,QACPhc,KAAKyd,cAAc5F,QAGrB7X,KAAKwH,UACIxH,KAAK+b,UACd/b,KAAKyd,cAAc5F,QACnB7X,KAAKwH,UAGPxH,KAAKoH,OAAQ,EACbpH,KAAKmW,OAAOuC,WAAWtG,YAAYpS,KAAKmW,SAC/B5V,EAAQsF,SACb7F,KAAKwgB,SACPxgB,KAAKwgB,SAAS3I,QACL7X,KAAKygB,cACdzgB,KAAKygB,aAAa5I,SAIjBtX,EAAQsF,QACXiJ,GAAepC,EAAS/C,EAAa3J,KAAK0gB,SAG5ChU,EAAQrE,QAAa0G,EACd/O,MAlDEA,OAsDT2gB,GAAS,CACXjK,YAAa,SAAqB/E,GAChC,IAAIxK,EAAMnH,KAAKO,QAAQ4G,IAUvB,OAPEA,EADEkE,GAASlE,GACLwK,EAAMxD,aAAahH,GAChB6E,GAAW7E,GACdA,EAAI2E,KAAK9L,KAAM2R,GAEf,GAGDxK,GAETwV,KAAM,WACJ,IAAI3K,EAAOhS,KAAKgS,KAChB3E,GAAS2E,EAAMxI,GACfwI,EAAKpF,MAAM2I,aAAe,GAAG7M,OAAO1I,KAAKmV,gBAAkByL,WAAW5gB,KAAKwV,kCAAoC,GAAI,OAErHkH,MAAO,WACL,IAAI1K,EAAOhS,KAAKgS,KAChBvE,GAAYuE,EAAMxI,GAClBwI,EAAKpF,MAAM2I,aAAevV,KAAKsV,yBAEjChO,MAAO,WACL,IAAIoF,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACnBP,KAAKkW,QAAS,EACdlW,KAAKyc,SAAU,EACfzc,KAAKF,SACLE,KAAK4Y,OACL5Y,KAAK+b,SAAU,EAEX/P,GAAWzL,EAAQ+G,QACrB6H,GAAYzC,EAAS/B,EAAapK,EAAQ+G,MAAO,CAC/CkH,MAAM,KAIkC,IAAxCgB,GAAc9C,EAAS/B,IAIvB3K,KAAKoH,OAASpH,KAAKyc,UAAYzc,KAAKgc,QACtChc,KAAKyH,KAAKzH,KAAKwW,QAGnBhP,OAAQ,WACN,IAAIkF,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACnBP,KAAKkW,QAAS,EACdlW,KAAK0H,QAAS,EACd1H,KAAKyc,SAAU,EACfzc,KAAK0c,QACL1c,KAAKka,SACL7M,GAASrN,KAAKmW,OAAQnN,GACtBhJ,KAAKiX,YACLjX,KAAKyY,aACLzY,KAAKgc,QAAS,EAEThc,KAAKkC,YACJ8J,GAAWzL,EAAQiH,SACrB2H,GAAYzC,EAAS5C,EAAcvJ,EAAQiH,OAAQ,CACjDgH,MAAM,IAIVgB,GAAc9C,EAAS5C,KAG3B0V,kBAAmB,WACjB,IAAIxX,EAAWhI,KAAK0M,QAAQwI,cAE5B,GAAIlV,KAAKkW,UAAYlO,EAAS4U,mBAAqB5U,EAAS6U,yBAA2B7U,EAAS8U,sBAAwB9U,EAAS+U,qBAAsB,CACrJ,IAAI5U,EAAkBH,EAASG,gBAE3BA,EAAgBqX,kBAClBrX,EAAgBqX,oBACPrX,EAAgB0Y,wBACzB1Y,EAAgB0Y,wBAAwBC,QAAQC,sBACvC5Y,EAAgB6Y,qBACzB7Y,EAAgB6Y,uBACP7Y,EAAgB8Y,qBACzB9Y,EAAgB8Y,wBAItBtB,eAAgB,WACd,IAAI3X,EAAWhI,KAAK0M,QAAQwI,cAExBlV,KAAKkW,SAAWlO,EAAS4U,mBAAqB5U,EAAS6U,yBAA2B7U,EAAS8U,sBAAwB9U,EAAS+U,uBAE1H/U,EAAS2X,eACX3X,EAAS2X,iBACA3X,EAASkZ,qBAClBlZ,EAASkZ,uBACAlZ,EAASmZ,oBAClBnZ,EAASmZ,sBACAnZ,EAASoZ,kBAClBpZ,EAASoZ,qBAIf9E,OAAQ,SAAgBrN,GACtB,IAAI1O,EAAUP,KAAKO,QACfmS,EAAW1S,KAAK0S,SAChBG,EAAUH,EAAS1R,OAAOoD,KAAKsO,GAAU,IACzCwL,EAAUrL,EAAQU,KAAOV,EAAQM,OACjCgL,EAAUtL,EAAQY,KAAOZ,EAAQQ,OAErC,OAAQrT,KAAKoa,QAEX,KAAK9R,EACHtI,KAAKie,KAAKC,EAASC,GACnB,MAGF,KAAK3V,EACHxI,KAAK2H,KAAK8K,GAAgBC,IAAW,EAAOzD,GAC5C,MAEF,KAAK1G,EAEDvI,KAAKoa,OAAS,WACd,IAAIiH,EAAkBpO,KAAKC,IAAIgL,GAE3BmD,EAAkB,GAAKA,EAAkBpO,KAAKC,IAAIiL,KAEpDne,KAAK0S,SAAW,GAEZwL,EAAU,EACZle,KAAK8a,KAAKva,EAAQ0F,MACTiY,GAAW,GACpBle,KAAKgb,KAAKza,EAAQ0F,OAItB,MAKNlB,GAAQ2N,GAAU,SAAU4O,GAC1BA,EAAEnO,OAASmO,EAAE/N,KACb+N,EAAEjO,OAASiO,EAAE7N,SAGjB4I,aAAc,WACZ,IAAI1E,EAAY3X,KAAK2X,UACjB/B,EAAa5V,KAAK4V,WACtB,OAAO5V,KAAKqD,OAAS,GAAKsU,EAAUxH,MAAQ,GAAKwH,EAAUrH,KAAO,GAAKqH,EAAUzF,OAAS0D,EAAW1D,OAASyF,EAAUxF,QAAUyD,EAAWzD,SAI7IoP,GAAgBtZ,EAAOuZ,OAEvBA,GAAsB,WAMxB,SAASA,EAAO9U,GACd,IAAInM,EAAUsE,UAAUxB,OAAS,QAAsB0L,IAAjBlK,UAAU,GAAmBA,UAAU,GAAK,GAIlF,GAFA/B,EAAgB9C,KAAMwhB,IAEjB9U,GAAgC,IAArBA,EAAQ+U,SACtB,MAAM,IAAIC,MAAM,0DAGlB1hB,KAAK0M,QAAUA,EACf1M,KAAKO,QAAU4L,GAAO,GAAIjH,EAAU0G,GAAcrL,IAAYA,GAC9DP,KAAKoa,QAAS,EACdpa,KAAKmgB,QAAS,EACdngB,KAAKkW,QAAS,EACdlW,KAAKgc,QAAS,EACdhc,KAAKuc,cAAe,EACpBvc,KAAK2X,UAAY,GACjB3X,KAAKwW,MAAQxW,KAAKO,QAAQqF,iBAC1B5F,KAAKqgB,OAAQ,EACbrgB,KAAKyc,SAAU,EACfzc,KAAKqD,OAAS,EACdrD,KAAKwa,QAAS,EACdxa,KAAK0f,SAAU,EACf1f,KAAK0S,SAAW,GAChB1S,KAAKoH,OAAQ,EACbpH,KAAK+b,SAAU,EACf/b,KAAKob,SAAU,EACfpb,KAAKkgB,aAAc,EACnBlgB,KAAK0H,QAAS,EACd1H,KAAKqY,SAAU,EACfrY,KAAKmd,UAAW,EAChBnd,KAAKsY,SAAU,EACftY,KAAK2hB,OAkRP,OA/QA/d,EAAa4d,EAAQ,CAAC,CACpB7d,IAAK,OACLK,MAAO,WACL,IAAIoS,EAAQpW,KAER0M,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QAEnB,IAAImM,EAAQrE,GAAZ,CAIAqE,EAAQrE,GAAarI,KACrB,IAAIqgB,EAA0C,QAAlC3T,EAAQmP,QAAQ9N,cACxBzN,EAAS,GAmBb,GAlBAyE,GAAQsb,EAAQ,CAAC3T,GAAWA,EAAQ4T,iBAAiB,QAAQ,SAAU3O,GACjE3F,GAAWzL,EAAQgE,QACjBhE,EAAQgE,OAAOuH,KAAKsK,EAAOzE,IAC7BrR,EAAOoE,KAAKiN,GAELyE,EAAMM,YAAY/E,IAC3BrR,EAAOoE,KAAKiN,MAGhB3R,KAAKqgB,MAAQA,EACbrgB,KAAKqD,OAAS/C,EAAO+C,OACrBrD,KAAKM,OAASA,EACdN,KAAKiV,WAEDxJ,GAAYzD,SAAS6J,cAAcxJ,GAAWuE,MAAM/F,cACtDtG,EAAQsG,YAAa,GAGnBtG,EAAQsF,OAAQ,CAClB,IAAI8O,EAAQ,EAERiN,EAAW,WAIX,IAAIxG,GAHNzG,GAAS,EAELA,IAAUyB,EAAM/S,UAElB+S,EAAMqK,cAAe,EACrBrK,EAAMoK,SAAW,CACf3I,MAAO,WACLyC,aAAac,KAIjBA,EAAUoB,YAAW,WACnBpG,EAAMoK,UAAW,EAEjBpK,EAAMoH,UACL,KAIPxd,KAAKygB,aAAe,CAClB5I,MAAO,WACL9S,GAAQzE,GAAQ,SAAUqR,GACnBA,EAAMoM,UACTjP,GAAe6C,EAAO1H,EAAY2X,QAK1C7c,GAAQzE,GAAQ,SAAUqR,GACpBA,EAAMoM,SACR6D,IAEAzS,GAAYwC,EAAO1H,EAAY2X,EAAU,CACvCpT,MAAM,YAKZW,GAAYzC,EAAS/C,EAAa3J,KAAK0gB,QAAU,SAAUhQ,GACzD,IAAIvN,EAASuN,EAAKvN,OAEmB,QAAjCA,EAAO0Y,QAAQ9N,eAA6B/B,GAAWzL,EAAQgE,UAAWhE,EAAQgE,OAAOuH,KAAKsK,EAAOjT,IACvGiT,EAAM3O,KAAK2O,EAAM9V,OAAO8M,QAAQjK,SAKvC,CACDQ,IAAK,QACLK,MAAO,WACL,IAAIhE,KAAKoH,MAAT,CAIA,IAAIsF,EAAU1M,KAAK0M,QACfnM,EAAUP,KAAKO,QACfsV,EAASnJ,EAAQgM,WACjBmJ,EAAW7Z,SAAS6J,cAAc,OACtCgQ,EAAStL,UAAY1O,EACrB,IAAIsO,EAAS0L,EAASjE,cAAc,IAAIlV,OAAOL,EAAW,eACtD/C,EAAQ6Q,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,WACnD9C,EAAU4Q,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,aACrDhD,EAAS8Q,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,YACpDjD,EAAS+Q,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,YACpDwQ,EAAS1C,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,YA+BxD,GA9BArI,KAAK6V,OAASA,EACd7V,KAAKmW,OAASA,EACdnW,KAAKsF,MAAQA,EACbtF,KAAKuF,QAAUA,EACfvF,KAAKqF,OAASA,EACdrF,KAAKoF,OAASA,EACdpF,KAAK6Y,OAASA,EACd7Y,KAAKuX,OAASpB,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,YACzDrI,KAAK+f,WAAa5J,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,aAC7DrI,KAAKgd,OAAS7G,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,YACzDrI,KAAKqW,KAAOF,EAAOyH,cAAc,IAAIlV,OAAOL,EAAW,UACvDgF,GAAS/H,EAAQ/E,EAAQ+E,MAAqBkN,GAAmB7R,MAAMuL,QAAQ3L,EAAQ+E,OAAS/E,EAAQ+E,MAAM,GAAK/E,EAAQ+E,OAA1F0D,GACjCqE,GAAShI,EAAS9E,EAAQ8E,OAAsBmN,GAAmBjS,EAAQ8E,QAAxC2D,GACnC2E,GAAYvI,EAAQ4D,GAAazI,EAAQ6E,QAErC7E,EAAQ4E,WACVkI,GAAS8I,EAAQ,GAAGzN,OAAOL,EAAW,cAEjC9H,EAAQsF,QAA+B,WAArBtF,EAAQ4E,UAC7BiJ,GAAQyK,EAAQ3N,GAAa,SAI7BG,GAAS9K,EAAQiF,YAAcjF,EAAQiF,WAEzCjF,EAAQiF,UAAUwJ,MAAM7D,IAAepG,SAAQ,SAAUS,GACvD6H,GAAS8I,EAAQ3Q,MAIjBjF,EAAQgF,QAAS,CACnB,IAAI8Q,EAAOrO,SAAS6J,cAAc,MAC9BiQ,EAASlW,GAAcrL,EAAQgF,SAC/Bwc,EAAc3W,GAAQ4W,MAAM,EAAG,GAC/BC,EAAgB7W,GAAQ4W,MAAM,EAAG,GACjCE,EAAe9W,GAAQ4W,MAAM,GAE5BF,GACHzU,GAAS9H,EAASiN,GAAmBjS,EAAQgF,UAG/CR,GAAQ+c,EAASvhB,EAAQgF,QAAU6F,IAAS,SAAUpH,EAAOwS,GAC3D,IAAIxU,EAAO8f,GAAUlW,GAAc5H,GAC/BiK,EAAO6T,EAAShU,GAAU0I,GAASxS,EACnCqD,EAAOrF,IAASyJ,GAAYzH,EAAMqD,MAAQrD,EAAMqD,KAAOrD,EAE3D,GAAKqD,IAAS9G,EAAQgG,WAA2C,IAA/Bwb,EAAY3U,QAAQa,MAAiB1N,EAAQ8F,YAA8C,IAAjC4b,EAAc7U,QAAQa,MAAiB1N,EAAQ+F,WAA4C,IAAhC4b,EAAa9U,QAAQa,IAA5K,CAIA,IAAIkU,EAAOngB,IAASyJ,GAAYzH,EAAMme,MAAQne,EAAMme,KAAOne,EACvD+U,EAAQ/W,IAASyJ,GAAYzH,EAAM+U,OAAS/U,EAAM+U,MAAQ/U,EAC1D2S,EAAO3O,SAAS6J,cAAc,MAClC8E,EAAKtI,aAAa,OAAQ,UAC1BhB,GAASsJ,EAAM,GAAGjO,OAAOL,EAAW,KAAKK,OAAOuF,IAE3CjC,GAAW+M,IACd3K,GAAQuI,EAAMzL,GAAa+C,GAGzBzC,GAASnE,IACXgG,GAASsJ,EAAMnE,GAAmBnL,KAGM,IAAtC,CAAC,QAAS,SAAS+F,QAAQ+U,GAC7B9U,GAASsJ,EAAM,GAAGjO,OAAOL,EAAW,KAAKK,OAAOyZ,IAC9B,SAATlU,GACTZ,GAASsJ,EAAM,GAAGjO,OAAOL,EAAW,WAGlC2D,GAAW+M,IACb5J,GAAYwH,EAAMhN,EAAaoP,GAGjC1C,EAAK9D,YAAYoE,OAEnBpR,EAAQgN,YAAY8D,QAEpBhJ,GAAS9H,EAASyD,GAGpB,IAAKzI,EAAQ8F,UAAW,CACtB,IAAI+b,EAAU7c,EAAQ+a,iBAAiB,uBACvCjT,GAAS+U,EAAS/Y,GAClBtE,GAAQqd,GAAS,SAAUzR,GACzBpL,EAAQgN,YAAY5B,MAIxB,GAAIpQ,EAAQsF,OACVwH,GAASjI,EAAQ0D,GACjB2D,GAAS0J,EAAQ,CACfrP,OAAQvG,EAAQwG,eAG+B,WAA7CgB,OAAO0N,iBAAiBI,GAAQwM,UAClC5V,GAASoJ,EAAQ,CACfwM,SAAU,aAIdxM,EAAOyM,aAAanM,EAAQzJ,EAAQ6V,iBAC/B,CACLlV,GAASjI,EAAQuD,GACjB0E,GAAS8I,EAAQtN,GACjBwE,GAAS8I,EAAQvN,GACjByE,GAAS8I,EAAQnN,GACjByD,GAAS0J,EAAQ,CACfrP,OAAQvG,EAAQuG,SAElB,IAAIrB,EAAYlF,EAAQkF,UAEpB4F,GAAS5F,KACXA,EAAYiH,EAAQwI,cAAc0I,cAAcnY,IAG7CA,IACHA,EAAYzF,KAAKgS,MAGnBvM,EAAU8M,YAAY4D,GAGpB5V,EAAQsF,SACV7F,KAAKF,SACLE,KAAK4Y,OACL5Y,KAAKyc,SAAU,GAGjBzc,KAAKoH,OAAQ,EAET4E,GAAWzL,EAAQ6G,QACrB+H,GAAYzC,EAASlC,EAAajK,EAAQ6G,MAAO,CAC/CoH,MAAM,KAIkC,IAAxCgB,GAAc9C,EAASlC,GAKvBxK,KAAKoH,OAAS7G,EAAQsF,QACxB7F,KAAKyH,KAAKzH,KAAKwW,OALfxW,KAAKoH,OAAQ,MAaf,CAAC,CACHzD,IAAK,aACLK,MAAO,WAEL,OADA+D,OAAOyZ,OAASD,GACTC,IAOR,CACD7d,IAAK,cACLK,MAAO,SAAqBzD,GAC1B4L,GAAOjH,EAAU0G,GAAcrL,IAAYA,OAIxCihB,EAxTiB,GA6T1B,OAFArV,GAAOqV,GAAO3e,UAAW/C,GAAQ6Y,GAAQwB,GAAUhZ,GAASwf,IAErDa","file":"js/chunk-5078a51a.dc3fa722.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{\"images\":_vm.images,\"options\":_vm.options})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <slot :images=\"images\" :options=\"options\">\n    </slot>\n  </div>\n</template>\n<script>\nimport Viewer from 'viewerjs'\n\nexport default {\n  props: {\n    images: {\n      type: Array\n    },\n    rebuild: {\n      type: Boolean,\n      default: false\n    },\n    trigger: {},\n    options: {\n      type: Object\n    }\n  },\n\n  data () {\n    return {\n    }\n  },\n\n  computed: {\n  },\n\n  methods: {\n    onChange () {\n      if (this.rebuild) {\n        this.rebuildViewer()\n      } else {\n        this.updateViewer()\n      }\n    },\n    rebuildViewer () {\n      this.destroyViewer()\n      this.createViewer()\n    },\n    updateViewer () {\n      if (this.$viewer) {\n        this.$viewer.update()\n        this.$emit('inited', this.$viewer)\n      } else {\n        this.createViewer()\n      }\n    },\n    destroyViewer () {\n      this.$viewer && this.$viewer.destroy()\n    },\n    createViewer () {\n      this.$viewer = new Viewer(this.$el, this.options)\n      this.$emit('inited', this.$viewer)\n    }\n  },\n\n  watch: {\n    images () {\n      this.$nextTick(() => {\n        this.onChange()\n      })\n    },\n    trigger: {\n      handler () {\n        this.$nextTick(() => {\n          this.onChange()\n        })\n      },\n      deep: true\n    },\n    options: {\n      handler () {\n        this.$nextTick(() => {\n          this.rebuildViewer()\n        })\n      },\n      deep: true\n    }\n  },\n\n  mounted () {\n    this.createViewer()\n  },\n\n  destroyed () {\n    this.destroyViewer()\n  }\n}\n</script>\n","import mod from \"-!../../cache-loader/dist/cjs.js??ref--12-0!../../thread-loader/dist/cjs.js!../../babel-loader/lib/index.js!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./component.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../cache-loader/dist/cjs.js??ref--12-0!../../thread-loader/dist/cjs.js!../../babel-loader/lib/index.js!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./component.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./component.vue?vue&type=template&id=3d230e11&\"\nimport script from \"./component.vue?vue&type=script&lang=js&\"\nexport * from \"./component.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*!\n * Viewer.js v1.6.1\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2020-06-14T07:47:18.114Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Viewer = factory());\n}(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n\n    /**\n     * Enable to request fullscreen when play.\n     * @type {boolean}\n     */\n    fullscreen: true,\n\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n\n    /**\n     * Define the initial index of image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    zoom: null,\n    zoomed: null\n  };\n\n  var TEMPLATE = '<div class=\"viewer-container\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\"></div>' + '<div role=\"button\" class=\"viewer-button\" data-viewer-action=\"mix\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer'; // Actions\n\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom'; // Classes\n\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\"); // Events\n\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_HIDE = 'hide';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed'; // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\"); // RegExps\n\n  var REGEXP_SPACES = /\\s\\s*/; // Misc\n\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n\n  function isString(value) {\n    return typeof value === 'string';\n  }\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          var length = data.length;\n          var i;\n\n          for (i = 0; i < length; i += 1) {\n            if (callback.call(data, data[i], i, data) === false) {\n              break;\n            }\n          }\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280960')\n   * @returns {string} A string contains the image name.\n   */\n\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img'); // Modern browsers (except Safari)\n\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n\n    var body = document.body || document.documentElement;\n\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src; // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n\n    return newImage;\n  }\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n\n      default:\n        return '';\n    }\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n          parent = this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n\n      var element = this.element,\n          options = this.options,\n          list = this.list;\n      var items = []; // initList may be called in this.update, so should keep idempotent\n\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n\n        var url = _this.getImageURL(image);\n\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          img.src = src || url;\n          img.alt = alt;\n          img.setAttribute('data-index', index);\n          img.setAttribute('data-original-url', url || src);\n          img.setAttribute('data-viewer-action', 'view');\n          img.setAttribute('role', 'button');\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        setData(image, 'filled', true);\n\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n\n        addListener(image, EVENT_LOAD, function (event) {\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n      });\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList(index) {\n      var i = index || this.index;\n      var width = this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n      // Place the active item in the center of the screen\n\n      setStyle(this.list, assign({\n        width: outerWidth * this.length\n      }, getTransforms({\n        translateX: (this.viewerData.width - width) / 2 - outerWidth * i\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n\n      var options = this.options,\n          image = this.image,\n          viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = Math.min(width * 0.9, naturalWidth);\n        height = Math.min(height * 0.9, naturalHeight);\n        var imageData = {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: aspectRatio,\n          ratio: width / naturalWidth,\n          width: width,\n          height: height,\n          left: (viewerWidth - width) / 2,\n          top: (viewerHeight - height) / 2\n        };\n        var initialImageData = assign({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n\n      var image = this.image,\n          imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.left,\n        marginTop: imageData.top\n      }, getTransforms(imageData)));\n\n      if (done) {\n        if ((this.viewing || this.zooming) && this.options.transition) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      // this.image only defined after viewed\n      if (this.viewing || this.viewed) {\n        var image = this.image;\n\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n\n  var handlers = {\n    click: function click(event) {\n      var target = event.target;\n      var options = this.options,\n          imageData = this.imageData;\n      var action = getData(target, DATA_ACTION); // Cancel the emulated click when the native click event was triggered.\n\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n\n        case 'hide':\n          this.hide();\n          break;\n\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          this.toggle();\n          break;\n\n        case 'reset':\n          this.reset();\n          break;\n\n        case 'prev':\n          this.prev(options.loop);\n          break;\n\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n\n        case 'next':\n          this.next(options.loop);\n          break;\n\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (this.played) {\n            this.stop();\n          }\n\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        this.toggle();\n      }\n    },\n    load: function load() {\n      var _this = this;\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n\n      var element = this.element,\n          options = this.options,\n          image = this.image,\n          index = this.index,\n          viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:absolute;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n\n      if (!this.fulled || !options.keyboard) {\n        return;\n      }\n\n      switch (event.keyCode || event.which || event.charCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n        // Space\n\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n\n          break;\n        // ArrowLeft\n\n        case 37:\n          this.prev(options.loop);\n          break;\n        // ArrowUp\n\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom in\n\n          this.zoom(options.zoomRatio, true);\n          break;\n        // ArrowRight\n\n        case 39:\n          this.next(options.loop);\n          break;\n        // ArrowDown\n\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom out\n\n          this.zoom(-options.zoomRatio, true);\n          break;\n        // Ctrl + 0\n\n        case 48: // Fall through\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.tagName.toLowerCase() === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (!this.viewed || this.showing || this.viewing || this.hiding // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      } // Prevent default behaviours as page zooming in touch devices.\n\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      var action = options.movable ? ACTION_MOVE : false;\n\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n          action = this.action;\n\n      if (!this.viewed || !action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n\n      var options = this.options,\n          action = this.action,\n          pointers = this.pointers;\n      var pointer;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = false; // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false; // This timeout will be cleared later when a native dblclick event is triggering\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK);\n            }, 50);\n          } else {\n            this.imageClicked = true; // The default timing of a double click in Windows is 500 ms\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK);\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n\n      if (!this.viewed) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, true, event);\n    }\n  };\n\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n\n      if (!this.ready) {\n        this.build();\n\n        if (this.ready) {\n          this.show(immediate);\n        }\n\n        return this;\n      }\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION); // Force reflow to enable CSS3 transition\n\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n\n      return this;\n    },\n\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n\n      this.hiding = true;\n\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var viewer = this.viewer;\n\n      if (options.transition && hasClass(this.image, CLASS_TRANSITION) && !immediate) {\n        var hidden = this.hidden.bind(this);\n\n        var hide = function hide() {\n          // XXX: It seems the `event.stopPropagation()` method does not work here\n          setTimeout(function () {\n            addListener(viewer, EVENT_TRANSITION_END, hidden, {\n              once: true\n            });\n            removeClass(viewer, CLASS_IN);\n          }, 0);\n        };\n\n        this.transitioning = {\n          abort: function abort() {\n            if (this.viewed) {\n              removeListener(this.image, EVENT_TRANSITION_END, hide);\n            } else {\n              removeListener(viewer, EVENT_TRANSITION_END, hidden);\n            }\n          }\n        }; // Note that the `CLASS_TRANSITION` class will be removed on pointer down (#255)\n\n        if (this.viewed) {\n          addListener(this.image, EVENT_TRANSITION_END, hide, {\n            once: true\n          });\n          this.zoomTo(0, false, false, true);\n        } else {\n          hide();\n        }\n      } else {\n        removeClass(viewer, CLASS_IN);\n        this.hidden();\n      }\n\n      return this;\n    },\n\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this = this;\n\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var element = this.element,\n          options = this.options,\n          title = this.title,\n          canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n\n      this.image = image;\n      removeClass(this.items[this.index], CLASS_ACTIVE);\n      addClass(item, CLASS_ACTIVE);\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n\n      canvas.innerHTML = '';\n      canvas.appendChild(image); // Center current item\n\n      this.renderList(); // Clear title\n\n      title.innerHTML = ''; // Generate title after viewed\n\n      var onViewed = function onViewed() {\n        var imageData = _this.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n\n      var onLoad;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n\n          if (image.complete) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n\n            if (this.timeout) {\n              clearTimeout(this.timeout);\n            }\n          }\n        }\n      };\n\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n          once: true\n        });\n\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        } // Make the image visible if it fails to load within 1s\n\n\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this.timeout = false;\n        }, 1000);\n      }\n\n      return this;\n    },\n\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * Move the image with relative offsets.\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} offsetY - The relative offset distance on the y-axis.\n     * @returns {Viewer} this\n     */\n    move: function move(offsetX, offsetY) {\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX), isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY));\n      return this;\n    },\n\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.viewed && !this.played && this.options.movable) {\n        var changed = false;\n\n        if (isNumber(x)) {\n          imageData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          imageData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderImage();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n      return this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this2 = this;\n\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var element = this.element,\n          options = this.options,\n          pointers = this.pointers,\n          imageData = this.imageData;\n      var width = imageData.width,\n          height = imageData.height,\n          left = imageData.left,\n          top = imageData.top,\n          naturalWidth = imageData.naturalWidth,\n          naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (_originalEvent && ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = width / naturalWidth;\n\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        this.zooming = true;\n\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          imageData.left -= offsetWidth * ((center.pageX - offset.left - left) / width);\n          imageData.top -= offsetHeight * ((center.pageY - offset.top - top) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.left -= offsetWidth / 2;\n          imageData.top -= offsetHeight / 2;\n        }\n\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this2.zooming = false;\n\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          });\n        });\n\n        if (hasTooltip) {\n          this.tooltip();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var imageData = this.imageData;\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {\n        imageData.rotate = degree;\n        this.renderImage();\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.viewed && !this.played && this.options.scalable) {\n        var changed = false;\n\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          changed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderImage();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Play the images\n     * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this3 = this;\n\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.isShown || this.played) {\n        return this;\n      }\n\n      var options = this.options,\n          player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n\n      if (fullscreen) {\n        this.requestFullscreen();\n      }\n\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        var play = function play() {\n          _this3.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index += 1;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n            play();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          play();\n        }\n      }\n\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this4 = this;\n\n      if (!this.played) {\n        return this;\n      }\n\n      var player = this.player;\n      this.played = false;\n      clearTimeout(this.playing);\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this4.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this5 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('style', '');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this5.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this6 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this6.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this7 = this;\n\n      var options = this.options,\n          tooltipBox = this.tooltipBox,\n          imageData = this.imageData;\n\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION); // Force reflow to enable CSS3 transition\n\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            _this7.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this7.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n        }\n\n        _this7.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n    // Toggle the image size between its natural size and initial size\n    toggle: function toggle() {\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.initialImageData.ratio, true);\n      } else {\n        this.zoomTo(1, true);\n      }\n\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this8 = this;\n\n      var element = this.element,\n          options = this.options,\n          isImg = this.isImg; // Destroy viewer if the target image was deleted\n\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this8, image)) {\n            images.push(image);\n          }\n        } else if (_this8.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n\n      if (!images.length) {\n        return this;\n      }\n\n      this.images = images;\n      this.length = images.length;\n\n      if (this.ready) {\n        var indexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n\n          if (image && img) {\n            if (image.src !== img.src) {\n              indexes.push(i);\n            }\n          } else {\n            indexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var index = indexes.indexOf(this.index);\n\n              if (index >= 0) {\n                this.viewed = false;\n                this.view(Math.max(this.index - (index + 1), 0));\n              } else {\n                addClass(this.items[this.index], CLASS_ACTIVE);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n          options = this.options;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      this.destroyed = true;\n\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n\n      return url;\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.initialBodyPaddingRight;\n    },\n    shown: function shown() {\n      var element = this.element,\n          options = this.options;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n          options = this.options;\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.close();\n      this.unbind();\n      addClass(this.viewer, CLASS_HIDE);\n      this.resetList();\n      this.resetImage();\n      this.hiding = false;\n\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_HIDDEN);\n      }\n    },\n    requestFullscreen: function requestFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement; // Element.requestFullscreen()\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          this.move(offsetX, offsetY);\n          break;\n        // Zoom the current image\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, event);\n          break;\n\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n\n            break;\n          }\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n          viewerData = this.viewerData;\n      return this.length > 1 && imageData.left >= 0 && imageData.top >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n\n  var AnotherViewer = WINDOW.Viewer;\n\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Viewer);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.init();\n    }\n\n    _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var element = this.element,\n            options = this.options;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n        var isImg = element.tagName.toLowerCase() === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody(); // Override `transition` option if it is not supported\n\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n\n        if (options.inline) {\n          var count = 0;\n\n          var progress = function progress() {\n            count += 1;\n\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              }; // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n\n                _this.build();\n              }, 0);\n            }\n          };\n\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              addListener(image, EVENT_LOAD, progress, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n\n            if (target.tagName.toLowerCase() === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n\n          if (!container) {\n            container = this.body;\n          }\n\n          container.appendChild(viewer);\n        }\n\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n\n        this.ready = true;\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Viewer;\n  }();\n\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n\n  return Viewer;\n\n})));\n"],"sourceRoot":""}